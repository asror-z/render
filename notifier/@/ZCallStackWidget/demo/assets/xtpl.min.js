/*! xtpl 0.1.0 - MIT | git://github.com/rubaxa/xtpl.git */
(function(e){"use strict";"function"==typeof define&&define.amd?define("xtpl",[],e):"undefined"!=typeof module&&module.exports!==void 0?module.exports=e():window.xtpl=e()})(function(){"use strict";function e(n,r){var i={exports:{}};r(i,i.exports,t),e[n]=i.exports}function t(t){return e[t]}return e("utils",function(e){var t,n=/[&<>"]/,r=/&/g,i=/>/g,a=/</g,o=/"/g,s=[].slice;if(void 0===String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/,"")}),void 0===Function.prototype.bind&&(Function.prototype.bind=function(e){var t=s.call(arguments,1),n=this;return function(){return n.apply(e,t.concat(s.call(arguments,0)))}}),e.exports=t={isClient:"undefined"!=typeof navigator,support:{},shortTags:{area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,wbr:1,space:1,enter:1},extend:function(e,t){var n;e=e||{};for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},each:function(e,t,n){if(e){var r=0,i=e.length;if(i>=0&&0 in e)for(;i>r;r++)t.call(n,e[r],r,e);else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}},map:Array.map||function(e,t,n){for(var r=[],i=0,a=e.length;a>i;i++)r.push(t.call(n,e[i],i,e));return r},filter:Array.filter||function(e,t,n){for(var r=[],i=0,a=e.length;a>i;i++)t.call(n,e[i],i,e)&&r.push(e[i]);return r},inArray:Array.indexOf||function(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1},isEmptyObject:function(e){for(var t in e)return!1;return!0},escapeHTML:function(e){return"string"==typeof e?n.test(e)&&(~e.indexOf("&")&&(e=e.replace(r,"&amp;")),~e.indexOf("<")&&(e=e.replace(a,"&lt;")),~e.indexOf(">")&&(e=e.replace(i,"&gt;")),~e.indexOf('"')&&(e=e.replace(o,"&quot;"))):void 0===e&&(e=""),e},notEqual:function l(e,t){var n,r=typeof t;if(typeof e!==r&&"object"===r)return!0;if(t instanceof Array){if(n=t.length,e.length!==n)return!0;for(;n--;)if(l(e[n],t[n]))return!0}else{if("object"!==r||null===e||null===t)return e!=t;for(n in t)if(t.hasOwnProperty(n)&&l(e[n],t[n]))return!0;for(n in e)if(e.hasOwnProperty(n)&&l(e[n],t[n]))return!0}return!1},simpleNotEqual:function l(e,t){var n,r=typeof t;if(typeof e!==r&&"object"===r)return!0;if(t instanceof Array){if(n=t.length,e.length!==n)return!0;for(;n--;)if(e[n]!==t[n])return!0}else{if("object"!==r)return e!=t;for(n in t)if(t.hasOwnProperty(n)&&l(e[n],t[n]))return!0;for(n in e)if(e.hasOwnProperty(n)&&l(e[n],t[n]))return!0}return!1},simpleClone:function(e){var t,n=e;if(e instanceof Array)for(t=e.length,n=[];t--;)n[t]=e[t];else if(e instanceof Function)n=e;else if(e instanceof Object){n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t])}return n},print:function(){console.log(t.map(arguments,function(e){return e?(""+JSON.stringify(e)).replace(/^"|"$/g,""):e}))},error:function(e,t,n){console.log(e.message+"\nline: "+(n||e.line||e.lineNumber)+"\nfile: "+(t||e.file||e.filename))},matchAll:function(e,t){for(var n,r=[];n=t.exec(e);)void 0!==n[1]&&r.push(n.slice(1));return r},throttle:function(e,t,n){var r,i,a,o,s=function(){e.apply(n,o)};return function(){a=(new Date).getTime(),o=arguments,void 0===r?(i=a,r=setTimeout(s,t)):a-i>=t&&(clearTimeout(r),r=void 0,s())}},readFile:function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText}},t.isClient&&(t.support.touch=function(){var e=document.createElement("div");return"ontouchstart"in e}(),window.jQuery)){var c=t.support.touch?"toucstart":"click";jQuery.event.special.tap={delegateType:c,bindType:c}}}),e("xmlparser",function(e,t,n){function r(e,t){return new i(e,t)}function i(e,t){this.name=e||"#",this.shorty=void 0!==$[e],this.value="",this.attrs=t||{},this.length=0,this.children=[],this.binding=[]}var a=function(e){return e.charCodeAt(0)},o=/^[\r\n\s\t]+$/,s=a("\n"),l=a("<"),c=a(">"),u=a("="),d=a("a"),f=a("z"),p=a("0"),h=a("9"),x=a("-"),v=a(":"),m=a('"'),_=a("/"),g=(a("\\"),33),y=1,b=2,w=n("utils"),C=w.each,$=w.shortTags,E=function(e,t,n){function i(e){var t,r=n[e.name];void 0!==r&&(t="string"==typeof r?r:r(e,e.attrs),"string"==typeof t&&e.replace(t))}function a(e){var r,i=n["#text"],a=e.value;if(void 0!==i&&(r=i(a,e),r!==a)){var o=t.line;r=E(r,t,n),t.line=o,e.replace(r.children)}}function w(t){var n=e.indexOf("\n",S),r=S-P+1;throw 0>=n&&(n=e.length),{file:F,line:z+":"+r,message:t+"\n"+e.substring(P,n).replace(/\t/g," ")+"\n"+Array(r).join("-")+"^"}}function C(){var t=e.charCodeAt(++S);for(t!==m&&w('"'+j+'" expected value of the attribute in quotes'),L=++S;M>S;){if($=e.charCodeAt(S),t===$)return e.substring(L,S);S++}S-=0|(S-L)/2+1,w('Unclosed string literal in "'+j+'" attribute')}n=n||{},t=t||{};for(var $,k,A,T,O,j,N,S=0,L=0,M=e.length,D=r("#root"),z=t.line||1,F=t.file,P=0,q=0,B=null==t.trim?1:t.trim;M>S;)$=e.charCodeAt(S),g>$&&$===s&&(P=S+1,z++),T===y?$===c||$===_&&e.charCodeAt(++S)===c?(O=e.substring(k,q+1),T=void 0,q=S+1,"#"===D.name?(D.name=O,$===_&&(D.shorty=!0,i(D),D=D.parent)):D.name===O?(i(D),D=D.parent):w('Wrong close "'+O+'" tag should be "'+D.name+'"')):g>$?(L=S,T=b,A=void 0):$>=d&&f>=$||$>=p&&h>=$||$===x||$===v?q=S:w("Invalid character in node name"):T===b?$===_||$===c?(void 0!==A&&D.attr(e.substring(A,S).trim(),!0),S--,T=y):$===u||g>$?void 0!==A&&(j=e.substring(A,S).trim(),D.attr(j,g>$?!0:C()),A=void 0):(d>$||$>f)&&$!==x&&$!==v?w("Invalid character in attrbiute name"):void 0===A&&(A=S):$===l&&(S-q>0&&(N=e.substring(q,S),(0===B||o.test(N)===!1)&&(D.appendText(N),a(D.last))),e.charCodeAt(S+1)===_?S++:(D=D.newChild(),D.file=F,D.line=z),k=S+1,T=y),S++;return T===y?w('"'+e.substring(k,S)+'" tag should be closed'):"#root"!==D.name&&w('"'+D.name+'" tag should be closed'),S-q>0&&(N=e.substring(q,S),(0===B||o.test(N)===!1)&&(D.appendText(N),a(D.last))),D};i.prototype={create:function(e,t){return r(e,t)},attr:function(e,t){return this.attrs[e]=t,this},bind:function(e){e.binded=this.binded=!0,this.binding.push(e)},on:function(e,t,n){void 0===this.events&&(this.events=[]),this.events.push(e.replace(/^.+[:-]+/,""),t,n)},bindDecl:function(e,t){void 0===this.decl&&(this.decl=[]),this.decl.push(e,t)},closest:function(e){var t=this.parent;if(t.name!==e)for(;(t=t.parent)&&t.name!==e;);return t},index:function(){for(var e=this.parent.children,t=e.length;t--;)if(e[t]===this)return t;return-1},append:function(e,t){var n=this.children;return void 0===t?n.push(e):n.splice(t.index(),0,e),this.first=n[0],this.last=n[(this.length=n.length)-1],e.parent=this,this},appendArray:function(e){return C(e,function(e){this.append(e)},this),this},empty:function(){return this.children=[],this.length,delete this.first,delete this.last,this},remove:function(){var e=this.parent,t=e.children,n=this.index();return-1!==n&&t.splice(n,1),e.first=t[0],e.last=t[(e.length=t.length)-1],this},find:function(e){var t=[],n=">"!=e.charAt(0);return e=e.replace(">",""),C(this.children,function r(i){(i.name===e||"*"===e)&&t.push(i),n&&C(i.children,r)}),t},wrap:function(e,t){var n=r(e,t);return n.file=this.file,n.line=this.line,this.parent.append(n,this),n.append(this.remove()),n},innerWrap:function(e,t){var n=r(e,t),i=this.children,a=0,o=i.length;for(this.children=[];o>a;a++)n.append(i[a]);return this.append(n)},replace:function(e){var t=this.parent,n=[].concat(e),r=0,i=n.length;for(this.remove();i>r;r++)e=n[r],"string"==typeof e?t.appendText(e):t.append(e);return this},appendText:function(e){if(""!==e){var t=this.last;void 0===t||"#text"!==t.name?this.newChild("#text").value=e:t.value+=e}return this},newChild:function(e,t){var n=r(e,t);return n.file=this.file,n.line=this.line,this.append(n),n},exception:function(e){throw{message:'Tag "'+this.name+'", '+e,line:this.line,file:this.file}},each:function(e){e(this,this.attrs),C(this.children,function(t){t.each(e)})},clone:function(){var e=r();return C(this,function(t,n){"children"===n?C(t,function(t){e.append(t.clone())}):/first|last/.test(n)||(e[n]=w.simpleClone(t))}),e},toString:function(e,t){t=e&&t||"",e=e?"\n":"";var n=t+this.value;if(C(this.children,function(r){n+=r.toString(e,"  "+t)}),"#"!=this.name.charAt(0)){var r,i,a=e+t+"<"+this.name,o=[];for(r in this.attrs)i=this.attrs[r],i===!0?o.push(r):o.push(r+'="'+i+'"');o.length&&(a+=" "+o.join(" ")),n=a+(this.shorty&&!this.length?"/>":">"+n+e+t+"</"+this.name+">")}return n}},E.newNode=r,e.exports=E}),e("xparser",function(e,t,n){(function(){var t=n("xmlparser"),r=t.newNode,i=function(e){return e.charCodeAt(0)},a=function(e){return String.fromCharCode(e)},o=0,s=i("\n"),l=i("{"),c=i("}"),u=i("("),d=(i(")"),i("[")),f=i("]"),p=i("="),h=i("`"),x=i("a"),v=(i("z"),i("0")),m=i("9"),_=i("\n"),g=i(">"),y=i("&"),b=i("."),w=i("#"),C=i("|"),$=i(","),E=i(":"),k=i("-"),A=i('"'),T=i("'"),O=i("/"),j=i("\\"),N=32,S=++o,L=++o,M=++o,D=++o,z=++o,F=(++o,++o),P=++o,q=++o,B=++o,H=(++o,n("utils").each),I=/(width|height|left|right|top|bottom|font-size|text-indent)$/,R="a abbr acronym address applet area article aside audio b base basefont bdi bdo big blockquote body br canvas caption center cite code col colgroup command datalist dd del details dfn dialog dir div dl dt em embed fieldset figcaption figure font footer form frame frameset h1 to h6 head header hgroup hr html i iframe img input ins kbd keygen label legend li link map mark menu meta meter nav noframes noscript object ol optgroup option output p param pre progress q rp rt ruby s samp script section select small source span strike strong style sub summary sup table tbody td textarea tfoot th thead time title tr track tt u ul var video wbr".split(" "),W={"if":function(e){return r("x:if",{test:e})},"else":function(e,t){var n=r("x:else");return n.shorty=!0,/^if\b/.test(e)&&(n.attrs["if"]=e.substr(2).trim()),t.last.append(n)},elseif:function(e,t){return W["else"]("if "+e,t)},"for":function(e,t){return W.each(e,t)},each:function(e){return e=e.match(/^\(?(\w+)(?:\s|,)\s*(\w+)?\)?\s*in\s*([^\|]+)(\|.+)?/i),r("x:each",{data:e[3],as:e[2]||e[1],key:e[2]?e[1]:"$index",filter:/^\|/.test(e[e.length-1])?e.pop().substr(1):void 0})}};H(R,function(e){R[e]=1});var J=function(e,n,i){function o(t,n){var r=e.indexOf("\n",st),i=st-pt+1;0>=r&&(r=e.length);try{r()}catch(a){console.log(a.stack.split("\n").slice(1).join("\n"))}throw{file:ft,line:dt+":"+i,message:t+"\n"+e.substring(pt,r).replace(/\t/g," ")+"\n"+Array(i+(0|n)).join("-")+"^"}}function R(e,t){var n;try{e="string"==typeof e?e.replace(/(\w)->(\w)/g,"$1.xxx.$2"):e,n=Function("ctx,Soul","return "+e)()}catch(r){if(e=e.replace(/(\w)\.xxx\.(\w)/g,"$1->$2"),r instanceof ReferenceError||r instanceof TypeError)return t?{expr:e,str:e}:"{{"+e+"}}";o(r.message+"\n---\n"+e+"\n---")}return t?{value:e,str:e,result:n}:n}function J(e){var r,a=ut.newChild("#text"),o=i["#text"],s=a.value=e;if(void 0!==o&&(r=o(s,a),r!==s)){var l=n.line;r=t(r,n,i),n.line=l,a.replace(r.children)}return a}function Q(){var t,n;for(lt=st;ct>st;){if(Z=e.charCodeAt(st),Z===A||Z===T||Z===j&&!/["')]/.test(a(et))){for(st++,et=Z;ct>st;){if(Z=e.charCodeAt(st),Z===j)t=!t;else{if(Z===et&&!t)break;t=0}st++}st>=ct&&o("Unterminated string")}else{if(Z===$||Z===c||Z===_)return n=e.substring(lt,st).trim().replace(/[;,]$/,""),lt=st+1,st--,n;if(Z===l)break}Z>N&&(et=Z),st++}st=lt}function U(t){for(lt=st+(0|t);ct>st&&(Z=e.charCodeAt(st),Z!==s);)st++;return e.substring(lt,st)}function X(e){var t,n=i[e.name];void 0!==n&&(t="string"==typeof n?n:n(e,e.attrs),"string"==typeof t&&e.replace(t))}function G(e){var t={};return H(e.attrs,function(n,r){var i=n,a=e.name;"string"==typeof n?/^x[:-](if|each)/.test(a)||/^(x|ng)-/.test(r)||(i=R(i)):n instanceof Object&&(i="",H(n,function(e,n){e=R(e,!0),"class"===r?void 0!==e.expr?(n=n.replace(/^([^'"])/,'"$1').replace(/([^'"])$/,'$1"'),i+=" {{"+e.expr+" ? "+n+' : ""}}'):e.result&&(i+=" "+n.trim().replace(/(^["']|["']$)/g,"")):"style"===r?i+=n+":"+(void 0!==e.expr?"{{"+e.expr+"}}":e.result)+(I.test(n)&&(e.expr?!/(\+\s*["'](%|[a-z]{2,3})['"]|%)$/.test(e.str):/^\d+(\.\d+)?$/.test(e.str))?"px":"")+";":(i=void 0,t[r+"-"+n]=void 0!==e.expr?"{{"+e.expr+"}}":e.result)})),null!=i&&(t[r]=i)}),e.attrs=t,e.parent||o("Too many close"),X(e),"x:decl"==e.parent.name&&(e=e.parent,X(e)),e.parent.single?G(e.parent):e.parent}function V(t){var n=e.substring(lt+(0|t),st);return lt=st,n}function K(t){for(;ct>st;){if(Z=e.charCodeAt(st),Z===l){var n=W[t](V().trim(),ut);return n.line=dt,n.file=ft,n.parent||ut.append(n),n}st++}o("Syntax error")}i=i||{},n=n||{};for(var Y,Z,et,tt,nt,rt,it,at,ot,st=0,lt=0,ct=e.length,ut=r("#root"),dt=n.line||1,ft=n.file,pt=0;ct>st;){if(Z=e.charCodeAt(st),Z===s&&(dt++,pt=st),void 0===tt){if(Z===h){for(Y=ut.newChild("x:script"),lt=st+1;e.charCodeAt(++st)!==h;);Y.value=V().trim()+";",X(Y)}else Z===y?(lt=st,tt=B):Z===C?(J(U(1).trim().replace(/\|$/,"")),nt&&(nt=!1,ut=G(ut)),lt=st):Z===O?U():Z===w?(lt=st,ut=ut.newChild("div"),tt=S):Z===b?(ut=ut.newChild("div"),tt=z):Z===g||Z===$?lt=st:Z===l||(Z===c?(ut=G(ut),lt=st):Z>N&&(lt=st,tt=L));ut.file=ft,ut.line=dt}else if(tt===L){if((Z===u||x>et)&&(rt=e.substring(lt,st).trim(),W[rt])){lt=st,ut=K(rt),tt=void 0;continue}if(Z===b)tt=z;else if(Z===d)tt=M;else if(Z===w)tt=S;else if(Z===C)tt=void 0,nt=!0;else{if(Z===E){tt=F;continue}Z===g?tt=D:Z===l?tt=D:Z>N&&x>Z&&Z!==k&&(v>Z||Z>m)&&o("Syntax error")}tt!==L&&(ut=ut.newChild(V().trim()),rt=ut.name,st--,/^[a-z_-][a-z0-9_-]*$/i.test(rt)||o('Invalid node name "'+rt+'"',-rt.length/2))}else tt===S?(Z===b||N>=Z||Z===d)&&(tt=Z===b?z:Z===d?M:D,ut.attrs.id='"'+V(1).trim()+'"',st--):tt===z?(N>=Z||Z===C||Z===l||Z===d)&&(ut.attrs["class"]='"'+V().trim().split(".").slice(1).join(" ")+'"',st--,it=void 0,tt=Z===d?M:D):tt===M?(Z===p||Z===f)&&(void 0===it&&(it=V(1)),Z===f&&(ot=V(1),lt=st+1,ut.attrs[it]="]"===ot?"true":ot,it=void 0,e.charCodeAt(st+1)!==d&&(tt=D))):tt===D?Z===C?(J(U(1).trim().replace(/\|$/,"")),lt=st,ut=G(ut),tt=void 0):Z===g?(lt=st+1,tt=void 0,ut.single=!0):Z===l&&(tt=void 0):tt===F||tt===q?Z===E?(ot=V().trim(),tt===F?(it=ot,Y=ut.attrs[it],ut.attrs[it]="",void 0!==Y&&"class"===it&&(ut.attrs[it]=Y+" ")):(at=ot,ut.attrs[it][at]=""),tt=P):Z===c&&(tt=void 0,void 0===it&&(ut=G(ut))):tt===P?Z===l?(Y=ut.attrs[it],ut.attrs[it]={},""!==Y&&"class"===it&&(ut.attrs[it][Y]=1),lt=st+1,tt=q):Z>N&&(ot=Q(),void 0===at?ut.attrs[it]="class"===it?(ut.attrs[it]+ot).replace(/"\s"/," "):ot:(tt=q,ut.attrs[it][at]=ot,at=void 0),Z===c?(tt===q&&st++,it=void 0,at=void 0,tt=void 0):tt!==q&&(it=void 0,at=void 0,tt=void 0)):tt===B&&(Z===p?(ut=ut.newChild("x:decl",{name:V(1).trim()}),tt=void 0):Z===l?(ut=ut.newChild("x:"+V(1).trim()),lt=++st,tt=F):Z>N&&N>=et&&(ut.newChild("x:"+V(1).trim(),{"x:context":U()}),tt=void 0));et=Z,st++}return"#root"!==ut.name&&ut.exception("not closed"),X(ut),ut};e.exports=J})()}),e("compile",function(e){function t(e,n,r){return t.pre(e,n),t.code(e,r)}t.pre=function n(e,t){var r,i=e.name,a=t[i],o=e.attrs;if(!e.noPre){if(void 0===a||(r=a(e,e.attrs)),r!==!0&&(r=t["**"](e,e.attrs)),r===!0)return n(e.parent,t),void 0;for(i in o)if(a=t["@"+i],void 0!==a&&a.call(t,e,i,o[i])===!0||t["@"].call(t,e,i,o[i])===!0)return delete o[i],n(e.parent,t),void 0}for(var s=e.children.slice(0),l=0,c=s.length;c>l;l++)n(s[l],t)},t.code=function r(e,n){var i,a,o,s,l,c=e.name,u=n[c],d=e.children,f="",p=e.binding,h=e.decl,x=e.events,v=(p.length||h||x)&&t.xpath(e),m="",_="",g="";if(i=void 0===u?n["**"](c,e,e.attrs):""===u?["",""]:u(e,e.attrs),e.xctrl&&(i[0]=t.tryCatch(e,'xtpl.ctrl["_'+e.xctrl+'"](ctx)')+i[0]),a=p.length){var y,b=0;for(o=0;a>o;o++){if(l=p[o],m+=",__xbind"+o,"x:if"==l.name)s=t.getExpr(l,"test"),b=1,l.attrs.test="__xbind"+o;else if("x:else"==l.name)s=t.getExpr(l,"if"),b=1,l.attrs.test="__xbind"+o;else if("x:value"==l.name)s=t.getExpr(l,"data"),l.attrs.data="__xbind"+o;else if("x:var"==l.name){var w=l.key;if(l.expr){var C=t.getExpr(l,w,l.value);s=t.tryCatch(l,"__xval="+C),"context"==w?(_=s+"if( __xval instanceof Object ) for( var key in __xval ){"+"  __xval0 = __xval[key];"+"  __xargs[key] = __xval0;"+'  __xargs["__"+key] = __xclone(__xval0);'+"  __xc = 1;"+"}"+_,g='for( var key in __xargs ){  if( !/^__/.test(key) ){    __xval = __xargs[key];    if( __xnotEq(__xval, __xargs["__"+key]) ){'+t.tryCatch(l,C+"[key] = __xval;")+"       __xc = 1;"+"    }"+"  }"+"}"+g):(_+=s+'  __xargs["'+w+'"] = __xval;',l.sync!==!1&&(_+='  __xargs["__'+w+'"] = __xclone(__xval);'+"  __xc = 1;"),l.sync===!1||/[\*\-\+\\!%\/=><]/.test(C)||(g+='__xval=__xargs["'+w+'"];'+'if( __xnotEq(__xval, __xargs["__'+w+'"]) ){'+t.tryCatch(l,C+" = __xval;")+"  __xc = 1;"+"}"))}else _+='__xargs["'+w+'"]='+t.lex(l.value)+";";continue}_+=t.tryCatch(l,"__xargs["+o+"]="+s),l.attrs.safe=!0}"x:attr"==c?(b=3,y=t.lex(e.attrs.name)):"x:decl"===c&&(b=5,y=t.lex(e.declName),m=" ctx,__xsync",_="var __xc;if(apply===void 0){"+_+"}else{"+g+"}return __xc"),i[0]+="__buf.b("+b+", ["+v+"],function (__xargs,apply){"+_+"},function "+(e.fnName||"")+"("+m.substr(1)+"){",i[1]="}"+(y?","+y:"")+");"+i[1],"x:decl"===c&&(i[0]+="var ___$apply=__buf.$apply, __$apply=__buf.$apply=function(force){if( __xsync(ctx,true) || force === true ){ ___$apply(true) }};",i[1]="__buf.$apply=___$apply;"+i[1])}if(x)for(o=0,a=x.length;a>o;o+=3)i[1]+="__buf.b(4,["+v+"],"+t.lex(x[o])+",function(evt){evt.preventDefault();"+"var el = evt.currentTarget;"+x[o+1]+"\n __$apply()"+"},"+t.lex(x[o+2]||0)+");";if(h)for(o=0,a=h.length;a>o;o+=2)s=h[o+1],s instanceof Object&&(s=JSON.stringify(s)),i[1]+="__buf.b(5,["+v+"],function(__xargs){"+t.tryCatch(e,"__xargs["+o+"]="+s)+"\nreturn __xargs},"+t.lex(h[o])+");";for(a=d.length,o=0;a>o;o++)f+=r(d[o],n);return(i[0]+f+i[1]).replace(/"\)\n__buf\.s\("/g,"").replace(/{;_/g,"{_")},t.lex=function(e){return JSON.stringify(e)},t.str=function(e){return"__buf.s("+t.lex(e)+")\n"},t.variable=function(e,n,r){return t.expr(e,"__buf.w($"+n+(r?',"'+r+'"':"")+");")},t.tryCatch=function(e,t,n){return"try{"+t+"}catch(e){"+(n||"")+(e.file?';__xerr(e,"'+e.file+'",'+e.line+")}":"}")},t.expr=function(e,n){var r="",i=0;return n=n.replace(/([\$@&])([\w-]+)/g,function(n,a,o){var s=e.attrs[o];return"$"!=a||e.attrs.safe?"@"==a&&(s=t.lex(s)):(s=t.getExpr(e,o),o="__xval"+i++,r+=t.tryCatch(e,o+"="+s,o+"=void 0"),s=o),void 0===s?"undefined":s}),r+n},t.getExpr=function(e,t,n){var r=(void 0===n?e.attrs[t]:n).replace(/(\w|\))->(\w)/g,"$1.attributes.$2");try{Function('"use strict";\n'+r)}catch(i){try{Function('"use strict";\n('+r+")")}catch(a){e.exception(' attribute "'+t+'": '+i.message+"\n---\n"+r+"\n---")}}return r},t.wrap=function(e,t){if(!e.binded){do{var n=e.parent,r=n.children,i=r.length,a=i,o=/#text|value/,s=0;if(t=t||e.attrs.bind,i>1){for(;a--;)r[a].hidden&&e!==r[a]&&i--;a=i}if("both"==t&&(1!=e.length||o.test(e.first.name)))return e.innerWrap("x"),!0;if(1===i)"both"==n.bindMod&&n.innerWrap("x"),e.sys&&n.sys&&(n=e.wrap("#scope"),n.sys=1,n.hidden=1),e.manualBind||n.manualBind||n.bind(e);else if(o.test(e.name)){for(;a--;)if(!o.test(r[a].name)&&!r[a].hidden)return e.wrap("x"),!0;e.manualBind||n.manualBind||n.bind(e)}else("wrap"==t||"both"==t)&&(e.wrap("x"),s=1)}while(s);e.bindMod=t,delete e.attrs.bind}},t.xpath=function(e,t){var n=e.xpath;if(t=e.attrs.x||t,void 0!==n)return n;if(n=[],t&&console.group(e.name+": "+JSON.stringify(e.attrs)),e.parent)do for(var r=e.parent.children,i=0,a=r.length,o=0;a>i;i++)if(t&&console.log(r[i].hidden,o,""+r[i]),r[i].pseudoRoot)o=0;else if(!r[i].hidden){if(r[i]===e){n.push(o);break}o++}while((e=e.parent)&&e.parent&&!e.sys);return t&&(console.log("xpath:",n),console.groupEnd()),n},e.exports=t}),e("buffer",function(e,t,n){function r(e){var t,n=e.min,i=n,a=e.max;if(void 0!==n)for(;a>=i;i++)t=e[i],void 0!==t&&(t.zmb=1,r(t))}function i(e,t,n,r,i,s){var l=0,u=t.childNodes,d=r.extra,f=document.createElement("div"),p=r.render,h=[];x(i,function(i,c){if(void 0===d||d(i)){var x,v=s[l],m=u[l];i!==v&&(n.remove(l),e.idx=l,e.xpath=r.xpath,e.clear(),p(i,c),x=a(f,""+e),void 0===m?t.appendChild(x):o(m,x,t)),h[l]=i,l++}});for(var v=u.length-1;v>=l;v--)c(u[v],e._decl,!0),n.remove(v),t.removeChild(u[v]);return f=null,h}function a(e,t){return/^<option/i.test(t)?(e.innerHTML="<select>"+t+"</select>",e=e.firstChild):/^<tr/.test(t)?(e.innerHTML="<table><tbody>"+t+"</tbody></table>",e=e.firstChild.firstChild):e.innerHTML=t,e.firstChild}function o(e,t,n){void 0===n&&(n=e.parentNode),n.insertBefore(t,e),n.removeChild(e)}function s(e,t){if(void 0!==t.el)return t.el;for(var n=t.xpath,r=n.length;r--&&(e=e.childNodes[n[r]]););return t.el=e}function l(e,t){for(var n=t.length;n--&&(e=e.childNodes[t[n]],null!=e););return e}function c(e,t,n){var r,i=e.getElementsByTagName("*"),a=t[e.xdecl];for(n===!0&&(void 0!==e.xevents&&h(e),void 0!==a&&void 0!==a.remove&&a.remove(e,e.parentNode)),r=i.length;r--;)e=i[r],a=t[e.xdecl],void 0!==e.xevents&&h(e),void 0!==a&&void 0!==a.remove&&a.remove(e,e.parentNode)}function u(e,t){var n,r=e;if(e instanceof Array)for(n=e.length,r=[];n--;)r[n]=t?e[n]:u(e[n]);else if(e instanceof Function)r=e;else if(e instanceof Object){r={};for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n])}return r}function d(e){return"tap"===e&&(e=E.support.touch?"touchstart":"click"),e}function f(e,t,n,r){var i,a,o,s=e.xevents=e.xevents||m++;n=d(n),r.gid=r.gid||"x"+m++,$[s]||($[s]={}),$[s][n]||($[s][n]=[]),o=$[s][n],i=o[r.gid]=o[r.gid]||p(e,r),e.addEventListener?e[t?"addEventListener":"removeEventListener"](n,i,!1):e[t?"attachEvent":"detachEvent"]("on"+n,i),t===!0?o.push(r):(a=T(o,r),a>-1&&o.splice(a,1),o.length||(delete o[r.gid],delete $[s][n]),O($[s])&&delete $[s])}function p(e,t){return function(n){n=n||window.event,n.target||(n.target=n.srcElement||document),3===n.target.nodeType&&(n.target=n.target.parentNode),n.currentTarget||(n.currentTarget=e),!n.relatedTarget&&n.fromElement&&(n.relatedTarget=n.fromElement===n.target?n.toElement:n.fromElement),n.stopPropagation||(n.stopPropagation=function(){this.cancelBubble=!0}),n.preventDefault||(n.preventDefault=function(){this.returnValue=!1}),t.call(e,n)===!1&&(n.preventDefault(),n.stopPropagation())}}function h(e){var t,n,r,i=e.xevents,a=$[i];if(a)for(t in a)for(r=a[t],n=r.length;n--;)f(e,0,t,r[n])}function x(e,t){if(e){var n,n=0,r=e.length;if(void 0!==r&&n in e)for(;r>n;n++)t(e[n],n);else for(n in e)e.hasOwnProperty(n)&&t(e[n],n)}}var v=0,m=1,_=1,g=2,y=3,b=4,w=5,C={autofocus:1,autoplay:1,async:1,checked:1,controls:1,defer:1,disabled:1,hidden:1,loop:1,multiple:1,open:1,readonly:1,required:1,scoped:1,selected:1},$={},E=n("utils"),k=E.isClient,A=k&&(window.opera||/MSIE/.test(navigator.userAgent)),T=E.inArray,O=E.isEmptyObject,j=E.notEqual,N=E.escapeHTML,S=k&&"cssText"in document.createElement("div").style,L=function(e){this.id=++v,this._=[],e&&(this.ids={},this.index=[])};L.prototype={constructor:L,get:function(e){for(var t,n=e.length,r=this;n--;)t=e[n],r=r[t]||L.Null;return r},push:function(e,t){for(var n,r,i=e.xpath,a=i.length,o=this;a--;)n=i[a],r=o[n],(void 0===r||void 0!==r.zmb)&&(o[n]=new L,o.min=void 0===o.min?n:Math.min(o.min,n),o.max=Math.max(0|o.max,n)),o=o[n];o.idx=i[0],o.label=t,1===o._.push(e)&&(o.type=e.type);var s=this.ids;return void 0===s[o.id]&&(s[o.id]=1,this.index.push(o)),e},removeItem:function(e){for(var t=this.get(e.xpath),n=t._,r=n.length;r--;)if(n[r]===e){n.splice(r,1);break}},remove:function(e){var t,n=this,i=e.length;if("object"==typeof e)for(;i--;)void 0!==n&&(t=e[i],n=n[t]);else n=n[e];n&&(n.zmb=1,r(n))},empty:function(e){r(this),e&&this._.length>1&&this._.splice(1,10)},each:function(e){for(var t,n,r=this,i=r.index,a=0,o=i.length,s={};o>a;)if(r=i[a],1!==r.zmb){a++,t=r._;for(var l,c=0;void 0!==t[c];c++)l=t[c],n=l.label,void 0===s[n]&&e(r,l)===!1&&(s[n]=1)}else o--,i.splice(a,1)}},L.Null=new L;var M=function(e,t){this.el=e,this.data=A?[]:"",this.xpath=[],this.events=[],this.idxQueue=[],this.bindDecl=[],this.bindData=new L(!0),this.applyFns=[],this._decl=t,this.$apply=this.applyChanges.bind(this)};M.prototype={s:A?function(e){this.data.push(e)}:function(e){this.data+=e},a:function(e){void 0!==e&&this.s(e)},w:function(e,t){void 0!==e&&("text"===t?this.s(e):this.s(N(e)))},save:function(){this.__data=this.data,this.data=A?[]:""},revert:function(){this.data=this.__data},each:function(e,t,n){if(e){var r,i=0,a=e.length,o=0,s=this.idx;if(void 0!==a&&0 in e)for(;a>i;i++)r=e[i],(void 0===n||n(r,i))&&(this.idx=o++,t(r,i));else for(i in e)r=e[i],e.hasOwnProperty(i)&&(void 0===n||n(r,i))&&(this.idx=o++,t(r,i));this.idx=s}},b:function(e,t,n,r,i){var a,o=this.idx,s=this.xpath,l=this.xlabel,c=t.length,d=[];if(void 0!==o&&(0===c?t[0]=o:t[c-1]=o,delete this.idx),t=t.concat(s),e===b)this.events.push({name:n,fn:r,xpath:t,sel:i});else if(n(d),e===g?d[0]=u(d[0],!0):e===w&&void 0!==i?this.xlabel=m++:d=u(d),this.bindData.push(a={type:e,xpath:this.xpath=t,args:d,getter:n,render:r,extra:i,label:this.xlabel}),e===g)this.each(d[0],r,i);else if(e===w)this.bindDecl.push(a),void 0!==i&&(r(d,n),a.$apply=this.$apply);else if(e===y){this.save(),r.apply(this,d);var f=""+this;this.revert(),""!==f&&"false"!==f&&"0"!==f&&"null"!==f&&this.s(" "+i+'="'+f+'"')}else r.apply(this,d);this.idx=o,this.xpath=s,this.xlabel=l},clear:function(){this.data=A?[]:""},toString:A?function(){return this.data.join("")}:function(){return this.data},applyChanges:function(e){var t=this,n=t.el;this.__freeze||(this.__freeze=!0,console.time("apply"),"function"==typeof e&&this.applyFns.push(e),this.bindData.each(function(e,r){var a,o,l,d=[],f=r.args,p=r.type,h=r.extra,x=r.getter,v=t.idx,m=t.xpath,b=t.$apply;if(p===w&&void 0!==h){if(o=!0,void 0===x(d=f))return!1;t.$apply=r.$apply}else if(x(d),p===g)o=!0;else for(a=d.length;a--;)j(f[a],d[a])&&(d[a]=u(d[a]),o=!0);if(o){if(t.xpath=r.xpath,l=s(n,r),p===g)d[0]=i(t,l,e,r,d[0],f[0]);else if(p===w){var $=t._decl[h||r.render];void 0!==$.update&&(void 0===h?$.update(l,d[0],f[0]):$.update(l,f))}else{"TEXTAREA"===l.nodeName&&(p=y,h="value"),t.clear(),p===y?t.w=t.a:e.empty(p===_),r.render.apply(t,d);var E=""+t;p===y?(t.w=t._w,"value"===h?l.value!==E&&(l.value=E):"class"===h?l.className=E:void 0!==C[h]?l[h]=""!==E&&"false"!==E&&"0"!==E:"style"===h&&S?l.style.cssText=E:"null"===E?l.removeAttribute(h):l.setAttribute(h,E)):(c(l,t._decl),l.innerHTML=E)}t.idx=v,t.xpath=m,t.$apply=b,r.args=d}}),this.applyEnd(),this.__freeze=!1,console.timeEnd("apply"))},applyEnd:function(){var e,t,n,r,i,a=this.bindDecl,o=this.events,c=this.applyFns,u=this.ctx;for(e=o.length;e--;)r=o[e],n=l(this.el,r.xpath,!0),r.sel?jQuery(n).on(r.name,r.sel,r.fn):f(n,!0,r.name,r.fn);for(e=a.length;e--;)i=a[e],n=s(this.el,i,!0),void 0===n?console.log("decl.error:",i.xpath,i):(r=this._decl[n.xdecl=i.extra||i.render],void 0!==r.init&&(r.ctx=u,r.init(n,i.extra?i.args:i.args[0])));for(this.events=[],this.bindDecl=[],this.applyFns=[],e=0,t=c.length;t>e;e++)c[e]()},setModel:function(e,t,n){if(!e.xmodel){e.xmodel=!0;var r,i=t.attributes,a=/text|pass/i.test(e.type+e.tagName),o=i[n],s=this.$apply,l=function(){o=i[n],s()},c=function(l){a?(r=e.value,o===r||l!==!0&&13!==l.keyCode||(i[n]=o,t.set(n,r)),i[n]=r):t.set(n,e.checked),s()},u=function(){e.xmodel=!1,c(!0),t.off("all",l),f(e,!1,"keydown",c),f(e,!1,"input",c),f(e,!1,"change",c),f(e,!1,"blur",u)};t.on("all",l),a?(f(e,!0,"keydown",c),f(e,!0,"input",c)):f(e,!0,"change",c),f(e,!0,"blur",u)}},destory:function(){c(this.el,this._decl,!0)}},M.prototype._w=M.prototype.w,e.exports=M}),e("xtpl",function(e,t,n){var r=n("utils"),i=n("xparser"),a=n("xmlparser"),o=n("compile"),s=n("buffer"),l=r.isClient,c="",u=l&&window.xtpl,d=l?location.pathname:__dirname,f={},p={},h={},x={},v=function(e,t){var n=c+t.src,i=$[/\.xtpl/.test(n)?"xparse":"parse"](r.readFile(n),n);e.hidden=1,e.appendArray(i.children)},m={"#text":function(e){return e.replace(/\{\{(.*?)\}\}/g,"<x:value bind>$1</x:value>").replace(/\{\*(.*?)\*\}/g,'<x:value output="text" bind>$1</x:value>')},"x:text":function(e,t){var n=e.first?e.first.value:t.value;return n},"x:space":" ","x:enter":"\n","x-space":" ","x-enter":"\n",include:v,"x:include":v},_=r.each,g=r.extend,y=function(e,t){var n={},r=this;"object"==typeof e?n=e:n[e]=t,_(n,function(e,t){if(e.pre||e.code){e.pre&&y.call(p,t,e.pre),e.code&&y.call(h,t,e.code);var n=e.children;n&&(m[t]=function(e){var t=e.children,r=e.length;if(n)for(0===r&&e.exception("can not be empty");r--;)-1===n.indexOf(t[r].name)&&e.exception("can contain only: "+n.replace(/\s/g,", "))})}else r[t]=r[t.replace(":","-")]=e})},b=function(e){return e=w(e),e.replace(/(\w)->(\w)/g,"$1.attributes.$2")},w=function(e){var t=["",""];return _(r.matchAll(e,/(?:\|\|)|(\|\s*([a-z]+[^|]+))/g),function(n){if(n[0]){var r=n[0].trim().split(":");t[0]="__xmods."+r[0].replace(/\|\s*/,"")+"("+t[0],t[1]=t[1]+(r.length>1?","+r.slice(1).join(","):"")+")",e=e.replace(n[0],"")}}),t[0]+e+t[1]},C=function(e,t){var n={__len:0};_(t,function(t,r){var i=r.replace(/^x[:-]/,"");/->/.test(t)&&(e.bind({name:"x:var",key:"__x$"+i,expr:!0,value:t.split("->")[0],sync:!1}),n.__len++,n["ctx."+i]="ctx.__x$"+i+"->"+t.split("->")[1]),e.bind({name:"x:var",key:i,expr:r!=i,value:b(t)})}),n.__len>0&&e.each(function(e,t,r){(r=n[t["x:model"]])?t["x:model"]=r:(r=n[t["x-model"]])&&(t["x:model"]=r)})},$={xml:!1,autoInit:!0,each:_,cache:f,onParser:m,mods:{},utils:r,parse:function(e,t){return a(e,{file:t||d},m)},xparse:function(e,t){return i(e,{file:t||d},m)},compile:function(e,t,n){var r,s=f[t];if(void 0===s){try{"string"==typeof e&&(e=n===!0?a(e,{file:t||d},m):i(e,{file:t||d},m)),r=o(e,p,h),s=Function("return "+r)()}catch(l){s=Function("return function(__buf){"+o.str("<pre>"+l.message+"\nline: "+l.line+"\nfile: "+l.file+"</pre>")+"return __buf.toString()}")(),console.log(l.message),l.stack&&console.log(l.stack)}void 0!==t&&(f[t]=s)}return s},ctrl:function(e,t){$.ctrl["_"+e]=t},mod:function(e,t){$.mods[e]=t},bind:function(e,t,n,r){var i=$.xml;void 0===r&&(r=i),$.xml=r;var a="string"==typeof t?$.compile(t,void 0,r):t,o=new s(e,x);return n=n||{},n.xel=e,n.xfn=a,n.xbuffer=o,n.$set=function(e,t){n[e]=t,n.$apply()},n.$delay=function(e,t){return setTimeout(function(){e(),n.$apply()},t)},n.$loop=function(e,t){return setInterval(function(){e(),n.$apply()},t)},n.$clear=function(e){clearTimeout(e)},n.$apply=o.$apply,e.innerHTML=a(o,n),o.applyEnd(),$.xml=i,n},pre:y.bind(p),tag:y.bind(h),decl:function(e,t){var n,r;"object"==typeof e?n=e:(n={},n[e]=t),_(n,function(e,t){"function"==typeof e&&(e={init:e,update:e}),e=x[t]=g(x[t],e),r=t.replace("x:","x-"),x[r]=e,e.tpl?p["x:"+t]=function(n,r){var i="string"==typeof e.tpl?e.tpl=$[$.xml?"parse":"xparse"](e.tpl).first:e.tpl.clone(),a=i.find("x:content")[0]||i.find("x-content")[0];return a&&(a.hidden=1,a.appendArray(n.children)),_(i.find("x:"+t),function(e){e.sys=1,e.name="x:decl",e.declName=t,C(e,e.attrs),e.newChild("x:decl-call",{name:t})}),i.hidden=1,n.sys=1,n.name="x:decl",n.fnName="__x"+t.replace(/[^a-z0-9]/,""),n.declName=t,n.empty().append(i),C(n,r),!0}:p[r]=p["@"+r]=p["@"+t]=function(t,n,r){var i;return t.__xdecl||(t.__xdecl=!0,delete t.attrs[n],e.compile&&(e.compile(t,r),i=!0),(e.init||e.update||e.remove)&&("string"==typeof n?t.bindDecl(n,b(r)):t.bindDecl(t.name,n))),i}})},noConflict:function(){return window.xtpl=u,$}};$.pre({"@":function(e,t,n){if("string"==typeof n&&-1!==n.indexOf("{{")){var r=e.create("x:attr",{name:t});return e.append(r,e.first),_(n.match(/\{\{[^}]*\}\}|\{[^{]+|[^{]+/g),function(n){if(""!==n){var i=r.newChild("#text");i.file=e.file,i.line=e.line,"{{"===n.substr(0,2)?(i.name="x:value",i.attrs.data=o.getExpr(e,t,b(n.slice(2,-2)))):i.value=n}}),!0}},"@x:ctrl":function(e,t,n){e.xctrl=n.replace(/"/g,""),delete e.attrs[t]},"@x:if":function(e,t,n){return e.wrap(t,{test:n}),!0},"@x:each":function(e,t,n,r){return n=n.match(/^\(?(\w+)(?:\s|,)\s*(\w+)?\)?\s*in\s*([^\|]+)(\|.+)?/i),e[r||"innerWrap"]("x:each",{data:n[3],as:n[2]||n[1],key:n[2]?n[1]:"$index",filter:/^\|/.test(n[n.length-1])?n.pop().substr(1):void 0}),!0},"@x:eval":function(e,t,n){e.newChild("x:eval",{source:n}),delete e.attrs[t]},"@x:repeat":function(e,t,n){return this["@x:each"](e,t,n,"wrap")},"@x:model":function(e,t,n){var r=e.attrs.type||"text",i="change",a=b(n),s="value";return n=n.split("->"),"text"==r?(i="input",a+=" = evt.target.value"):(a=a+" =! "+a,s="checked"),n[1]&&(i="focus",a="__buf.setModel(el, "+n[0]+", "+o.lex(n[1])+")",/check|radio/.test(r)&&e.on("mousedown",a+";")),e.on(i,a+";"),"textarea"==e.name?e.newChild("x:value",{data:b(n.join("->"))}):e.newChild("x:attr",{name:s}).newChild("x:value",{data:b(n.join("->"))}),!0
}}),_("change select submit reset tap click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave input keydown keypress keyup".split(" "),function(e){$.pre("@x:"+e,function(e,t,n){return n=n.split("=>"),e.on(t,b(n.pop()),n[0]),!0})}),m["x:decl"]=m["x-decl"]=function(e,t){t.name&&(e.remove(),$.decl(e.attrs.name,{tpl:e.first}))},$.tag({"#root":function(){return["function _(__buf,ctx){var __xerr=xtpl.utils.error,__xlog=xtpl.utils.print,__xnotEq=xtpl.utils.notEqual,__xclone=xtpl.utils.simpleClone,__xmods=xtpl.mods,__xval,__xval0,__xval1,__xval2,__xval3,__xval4,__$apply=__buf.$apply,__ctx=ctx,model=ctx.model,collection=ctx.collection;__buf.ctx=ctx;","__buf.$apply=__$apply;return __buf.toString()}"]},"#text":function(e){return[o.str(e.value),""]},"#scope":function(){return["",""]},"x:ctrl":{pre:function(e,t){e.xctrl=t.name,e.hidden=1},code:function(){return["",""]}},"x:script":{pre:function(e,t){e.hidden=1,t.data=e.value},code:function(e,t){return[o.tryCatch(e,t.data),""]}},"x:decl":function(){return["",""]},"x:decl-call":function(e,t){return["__x"+t.name+"(ctx, __xsync);",""]},"x:content":function(){return["",""]},"x:include":function(){return["",""]},"x:value":{children:"#cdata #text",pre:function(e,t){t.bind="false"!==t.bind,t.data=b(e.first?e.first.remove().value:t.data)},code:function(e,t){return[o.variable(e,"data",t.output),""]}},"x:if":{pre:function(e,t){t.bind="false"!==t.bind&&"wrap",e.sys=t.bind,e.hidden=1,e.braces=1},code:function(e){return[o.expr(e,"if($test){"),Array(e.braces+1).join("}")]}},"x:else":{pre:function(e,t){e.hidden=1,e.pseudoRoot=!0,t["if"]&&(e.sys=1,e.parent.braces++,e.parent.parent.bind(e))},code:function(e,t){var n="";return t["if"]&&(n="if($if){"),["} else {\n"+o.expr(e,n),""]}},"x:each":{pre:function(e,t){e.sys=1,e.hidden=1,e.manualBind=!0,t.bind="both"},code:function(e,t){return e.binded=!0,["__buf.b(2, ["+o.xpath(e)+"],function(__xargs){"+o.tryCatch(e,"__xargs[0]="+t.data)+o.expr(e,"},function(&as,&key){"),o.expr(e,"},&filter);")]}},"x:eval":{pre:function(e,t){e.sys=1,e.hidden=1,e.manualBind=!0,t.bind=!0},code:function(e,t){return e.binded=!0,["__buf.b(0, ["+o.xpath(e)+"],function(__xargs){"+o.tryCatch(e,"__xargs[0]="+t.source)+"},function(__xsource){"+"  var fn = xtpl.compile(__xsource, void 0, "+$.xml+");"+"  fn(__buf, ctx);","});"]}},"x:attrs":function(){return["",""]},"x:attr":{pre:function(e){var t=e.parent,n=t.xattrs;if(void 0===n){if("x:attrs"===t.name)return;n=t.xattrs=e.create("x:attrs"),n.allow=t.attrs["x:attrs-bind"],n.hidden=1,t.append(n,t.first),delete t.attrs["x:attrs-bind"]}e.hidden=1,e.manualBind=null!=n.allow&&-1==n.allow.indexOf(e.attrs.name),n.append(e.remove())},code:function(e){var t=e.manualBind;return[t?o.str(" "+e.attrs.name+'="'):"",t?o.str('"'):""]}},"**":{pre:function(e,t){return void 0===t.bind||t.bind||(e.hidden=1),t.bind&&o.wrap(e)},code:function(e,t,n){var r,i,a=[""],s="",l=t.shorty;for(r in n)i=n[r],a.push(r+(i===!0?"":"="+o.lex(i)));return a=a.length>1?a.join(" "):"",t.xattrs&&(s+=o(t.xattrs,p,h),t.xattrs.remove()),a+=l?"/>":">",[o.str("<"+e)+s+o.str(a),l?"":o.str("</"+e+">")]}}}),$.decl({"x:show":{compile:function(e,t){var n=e.attrs;n.style=(n.style||"")+";{{"+t+" ? '' : 'display: none;'}}"}},"x:hide":{compile:function(e,t){var n=e.attrs;n.style=(n.style||"")+";{{"+t+" ? 'display: none;' : ''}}"}},"x:fade-to":function(e,t){e.style.opacity=0|t},"x:autofocus":function(e,t){t&&setTimeout(function(){e.focus(),e.selectionStart=e.selectionEnd=e.value?e.value.length:0},1)}}),$.mod("css",function(e,t){return t?e:""}),r.isClient&&function(e,t){e.console=e.console||{},_(["log","time","timeEnd"],function(e){console[e]||(console[e]=function(){})}),t.createElement("x");var n=!1,r="load",i="onload",a="complete",o="DOMContentLoaded",s="onreadystatechange",l=function(){if(e.addEventListener)e.removeEventListener(r,l,!1),t.removeEventListener(o,l,!1);else{if(t.readyState!==a)return;e.detachEvent(i,l),t.detachEvent(s,l)}c()},c=function(){if($.autoInit)for(var e,n,r,i,a,o,s=t.scripts,l=s.length;l--;)e=s[l],n=e.getAttribute("type"),r=e.getAttribute("x-ctrl")||e.getAttribute("x:ctrl")||e.getAttribute("ctrl"),(r||/x(ml|html)/.test(n))&&(i=t.createElement("div"),o=e.innerHTML,a=e.parentNode,/x(ml|html)/.test(n)?(o="<div "+(r?' x:ctrl="'+r+'"':"")+">"+o+"</div>",$.bind(i,o,{},!0)):(o="div"+(r?"[x-ctrl="+r+"]":"")+" {\n"+o+"\n}",$.bind(i,o)),a.insertBefore(i,e),a.removeChild(e))};if(t.readyState===a)setTimeout(l,1);else if(e.addEventListener)e.addEventListener(r,l,!1),t.addEventListener(o,l,!1);else{e.attachEvent(i,l),t.attachEvent(s,l);try{n=null==e.frameElement&&t.documentElement}catch(u){}n&&n.doScroll&&function d(){try{n.doScroll("left"),l()}catch(e){setTimeout(d,50)}}()}}(window,document),e.exports=$}),t("xtpl")});