<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<form class="expandable-search  js-expandable-search">
    <label class="sr-only" for="searchInputX">Search</label>
    <input class="reset expandable-search__input js-expandable-search__input" type="search" name="searchInputX" id="searchInputX" placeholder="Search...">
    <button class="reset expandable-search__btn">
        <svg class="icon" viewBox="0 0 24 24"><title>Search</title><g stroke-linecap="square" stroke-linejoin="miter" stroke-width="2" stroke="currentColor" fill="none" stroke-miterlimit="10"><line x1="22" y1="22" x2="15.656" y2="15.656"></line><circle cx="10" cy="10" r="8"></circle></g></svg>

        
    </button>

    <style>
        /* --------------------------------

        File#: _1_expandable-search
        Title: Expandable Search
        Descr: A search button that expands to reveal a search input element
        Usage: codyhouse.co/license

        -------------------------------- */

        :root {
            --expandable-search-size-compact: 2.2em; // height and width - compact version
        --expandable-search-size-expanded: 10em; // width - expanded version
        --expandable-search-icon-size: 1.2em; // lens icon size
        }

        .expandable-search {
            position: relative;
            display: inline-block;
            user-select: none;
        }

        .expandable-search__input {
            width: var(--expandable-search-size-compact);
            height: var(--expandable-search-size-compact);
            padding: 0;
            color: transparent;
            overflow: hidden;
            border-radius: 50em;
            transition: width .3s var(--ease-out), box-shadow .3s, background-color .3s;

        &::-webkit-input-placeholder {
             color: transparent;
         }

        &::-moz-placeholder {
             opacity: 0;
             color: transparent;
         }

        &:-ms-input-placeholder {
             color: transparent;
         }

        &:-moz-placeholder {
             color: transparent;
         }

        &:hover {
             background-color: var(--color-contrast-lower);
             cursor: pointer;
         }

        &:focus, &.expandable-search__input--has-content {
                      background-color: var(--color-bg);
                      width: var(--expandable-search-size-expanded);
                      padding-top: 0;
                      padding-right: calc(4px + var(--expandable-search-size-compact));
                      padding-bottom: 0;
                      padding-left: var(--space-sm);
                      outline: none;
                      box-shadow: var(--shadow-md), 0 0 0 2px var(--color-primary);
                      color: var(--color-contrast-higher);
                      cursor: auto;
                      user-select: auto;

        &::-webkit-input-placeholder {
             color: var(--color-contrast-medium);
         }

        &::-moz-placeholder {
             opacity: 1;
             color: var(--color-contrast-medium);
         }

        &:-ms-input-placeholder {
             color: var(--color-contrast-medium);
         }

        &:-moz-placeholder {
             color: var(--color-contrast-medium);
         }
        }

        &:focus + .expandable-search__btn {
             pointer-events: auto;
         }

        &::-webkit-search-decoration,
        &::-webkit-search-cancel-button,
        &::-webkit-search-results-button,
        &::-webkit-search-results-decoration {
             display: none;
         }
        }

        .expandable-search__btn {
            position: absolute;
            top: 2px;
            right: 2px;
            width: calc(var(--expandable-search-size-compact) - 4px);
            height: calc(var(--expandable-search-size-compact) - 4px);
            border-radius: 50em;
            z-index: 1;
            pointer-events: none;
            transition: background-color .3s;

        .icon {
            font-size: var(--expandable-search-icon-size); // icon size
        }

        &:hover {
             background-color: var(--color-contrast-lower);
         }

        &:focus {
             outline: none;
             background-color: alpha(var(--color-primary), 0.15);
         }
        }
    </style>

    <script>

        (function() {
            var expandableSearch = document.getElementsByClassName('js-expandable-search');
            if(expandableSearch.length > 0) {
                for( var i = 0; i < expandableSearch.length; i++) {
                    (function(i){ // if user types in search input, keep the input expanded when focus is lost
                        expandableSearch[i].getElementsByClassName('js-expandable-search__input')[0].addEventListener('input', function(event){
                            Util.toggleClass(event.target, 'expandable-search__input--has-content', event.target.value.length > 0);
                        });
                    })(i);
                }
            }
        }());

    </script>

</form>

</body>
</html>
