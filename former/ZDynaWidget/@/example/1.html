<!DOCTYPE html>
<html lang="ru">
<head>

    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title></title>
    <div id="asrorz_simple_loading" class="simple-loading simple-loading-369"></div>


    <link type="image/x-icon" href="/favicon.ico" rel="icon">
    <link href="/render/asrorz/fontawesome-pro-5.12.0-web/css/all.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.8.2/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/render/asrorz/mdb/css/mdb.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/hint.css@2.6.0/hint.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/file-icon-vectors@1.0.0/dist/file-icon-classic.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/file-icon-vectors@1.0.0/dist/file-icon-square-o.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/file-icon-vectors@1.0.0/dist/file-icon-vivid.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/file-icon-vectors@1.0.0/dist/file-icon-vectors.min.css" rel="stylesheet">
    <link href="/render/asrorz/css/ALL.css" rel="stylesheet">
    <link href="/render/asrorz/css/font.css" rel="stylesheet">
    <link href="/render/asrorz/css/media.css" rel="stylesheet">
    <link href="/render/asrorz/css-app/market.css" rel="stylesheet">
    <link href="/render/asrorz/css-app/eyuf.css" rel="stylesheet">
    <link href="/render/ALL/jquery.loader.js-master/jquery.loader.min.css" rel="stylesheet">
    <link href="/render/animo/All/assets/loaders/CSS JS/SimpleLoader/loader/css/loading.css" rel="stylesheet">
    <link href="/render/theme/ZFontYandexWidget/assets/fonts/sibirix/stylesheet_01.css" rel="stylesheet">
    <link href="/blocks/assets/ALL/all.css" rel="stylesheet">
    <link href="/render/theme/ZCardWidget/theme/light.css" rel="stylesheet">
    <style></style>
    <style>            @media (min-width: 62em) {
        .classic-tabs .nav li:first-child {
            margin-left: 0px !important;
        }
    }</style>
    <style>
        .list-ul {
            display: flex;
            list-style: none;
            flex-direction: column;
            text-align: left;
            background: #4285f4;
            min-width: 100px;
            padding: 0;
            margin: 0;
            border-radius: 5px;
        }

        .list-li {
            border-bottom: solid #555555 1px;
            color: #ffffff;
            padding: 10px 20px;
            font-size: 16px;
            font-weight: 500;
        }

        .list-li:last-child {
            border-bottom: none;
        }

        .list-li:hover {
            background: #125188;
            color: #ffffff;
            cursor: pointer;
            padding: 10px 20px;
            transition: all 0.2s ease-in-out;
        }
    </style>
    <style>            .iconColor-w7 {

    color: {
        iconColor
    }

    !important
    ;
    font-size: px

    !important
    ;
    }


    </style>
    <style>            .iconColor-w8 {

    color: {
        iconColor
    }

    !important
    ;
    font-size: px

    !important
    ;
    }


    </style>
    <style>            .iconColor-w9 {

    color: {
        iconColor
    }

    !important
    ;
    font-size: px

    !important
    ;
    }


    </style>
    <style>            .iconColor-w10 {

    color: {
        iconColor
    }

    !important
    ;
    font-size: px

    !important
    ;
    }


    </style>
    <style>            .iconColor-w11 {

    color: {
        iconColor
    }

    !important
    ;
    font-size: px

    !important
    ;
    }


    </style>
    <style>         .card-body {
        position: relative;
    !important;
    }

    .card-footer {
        padding-bottom: 0 !important;
    }

    .kv-panel-after {
        padding-bottom: 0 !important;
    }

    .optionsCard-title {
        font-size: 20px;
        font-weight: 500;
    }

    .optionsCard-icon {
        font-size: 20px;
    }

    .card-body {
        padding: 10px !important;
        min-height: 150px;
    }


    </style>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-slimscroll@1.3.8/jquery.slimscroll.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@beta/dist/js.cookie.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.bundle.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mobile-detect@1.4.4/mobile-detect.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.form/4.2.2/jquery.form.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-popover-x@1.4.7/js/bootstrap-popover-x.js"></script>

    <!--  <script src="/render/asrorz/js/ALL.js"></script>-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/5.4.0/bootbox.min.js"></script>
    <script src="/render/asrorz/market/js/loadData.js"></script>
    <script src="/render/cards/ZVMarketWidget/asset/main2.js"></script>
    <script src="/render/animo/All/assets/loaders/CSS JS/SimpleLoader/loader/js/loading.js"></script>
    <script src="/render/ALL/jquery.loader.js-master/jquery.loader.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/intercooler@1.2.3/dist/intercooler.js"></script>
    <title></title>
</head>

<body class="white-skin">


<div id="page">

    <code
            id="w2"
            ic-get-from="/cores/faqs/index.aspx"
            ic-target="#content"
            ic-push-url="true"
            class=""
    >

    </code>
    <div id="content" class="content-footer p-3" ic-history-elt="">
        <div class="classic-tabs">
            <!-- Nav tabs -->
            <ul class="nav border-bottom-0 tabs-primary " id="tab-panel-id" role="tablist">
                <li class="nav-item">
                    <a class="nav-link waves-light active "
                       data-toggle="tab"
                       id="id-aa-classic-tab"
                       ic-get-from='/kernel/dynagrid/columns.aspx?model=zetsoft/models/user/User&theme=primary&id=PlaceCountry-0'
                       ic-push-url=""
                       ic-target="#content-options"

                       role="tab"
                       aria-controls="id-aa-classic"
                       style="color: #fff!important;">Колонки</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link waves-light  "
                       data-toggle="tab"
                       id="id-ab-classic-tab"
                       ic-get-from='/kernel/dynagrid/configs.aspx?model=zetsoft/models/user/User&theme=primary&id=PlaceCountry-0'
                       ic-push-url=""
                       ic-target="#content-options"

                       role="tab"
                       aria-controls="id-ab-classic"
                       style="color: #fff!important;">Настройки таблицы</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link waves-light  "
                       data-toggle="tab"
                       id="id-ac-classic-tab"
                       ic-get-from='/kernel/dynagrid/sorting.aspx?model=zetsoft/models/user/User&id=PlaceCountry-0&columns=&hidden='
                       ic-push-url=""
                       ic-target="#content-options"

                       role="tab"
                       aria-controls="id-ac-classic"
                       style="color: #fff!important;">Сортировка</a>
                </li>
            </ul>
            <!-- Nav tabs -->
            <!-- Tab panels -->
            <div class="tab-content border-right border-bottom border-left rounded-bottom card" id="content-panel-id">
                <!-- Panel -->
                <div class="tab-pane fade fade in show active" id="id-aa-classic" role="tabpanel"
                     aria-labelledby="id-aa-classic-tab">

                </div>
                <!-- Panel -->
                <!-- Panel -->
                <div class="tab-pane fade " id="id-ab-classic" role="tabpanel" aria-labelledby="id-ab-classic-tab">

                </div>
                <!-- Panel -->
                <!-- Panel -->
                <div class="tab-pane fade " id="id-ac-classic" role="tabpanel" aria-labelledby="id-ac-classic-tab">

                </div>
                <!-- Panel -->

            </div>
            <!-- Tab panels -->
        </div>
        <div class="container" id="content-options">


            <div class="columns-row">

                <div class="columns-model">

                    <div class="list-widget">
                        <ul class="list-ul">

                            <li class="list-li bg-primary get-columns" data-item="id"><i class="fas fa-list"></i>&nbsp;&nbsp;ID
                            </li>

                            <li class="list-li bg-primary get-columns" data-item="name"><i class="fas fa-list"></i>&nbsp;&nbsp;ФИО
                            </li>

                            <li class="list-li bg-primary get-columns" data-item="phone"><i class="fas fa-list"></i>&nbsp;&nbsp;Телефон
                            </li>

                        </ul>

                    </div>
                </div>

                <div class="card   border-primary">

                    <div class="view overlay">
                        <div class="card-header text-white bg-primary  p-2">
                            <div class="">
                                <div class="summary p-0 text-primary">

                                </div>
                            </div>
                            <div class="m-0">
                                <i class="fas fa-cog optionsCard-icon"></i> &nbsp;&nbsp;<b class="optionsCard-title">Панель
                                настроек - User</b>
                            </div>
                        </div>
                    </div>
                    <div class="card-body" id="optionsCard-card-body">

                        <div id="optionsDyna">
                            <h3>Выберите колонку с левого меню</h3>
                        </div>


                    </div>
                </div>
            </div>

            <script>

            </script>

        </div>


        <script>
            $(document).on('click', '.get-columns', function (e) {
                let attribute = $(e.target).data('item');

                $('#page').loader('show')

                $.ajax({
                    type: 'GET',
                    url: '/kernel/dynagrid/dynaform.aspx?id=PlaceCountry-0&attribute=' + attribute + "&model=zetsoft/models/user/User",
                    success: function (response) {
                        let icon = $(e.target).find('i').attr('class');
                        let text = $(e.target).text().trim();

                        $('#page').loader('hide');

                        $('.optionsCard-title').text(text);
                        $('.optionsCard-icon').attr('class', 'optionsCard-icon ' + icon);
                        $('#optionsDyna').html(response);
                    }
                });
            });

            $(document).on('complete.ic', function (evt, elt, data, settings, xhr, requestId) {
                setTimeout(function () {
                    $('#content-options').loader('hide');
                }, 500);
            });

            $('.nav-link').on('click', function (event) {
                let parent = $('.nav-item');
                $('#content-options').loader('show');

                parent.find('.active').removeClass('active');
                parent.find('.disabled-tab').removeClass('disabled-tab');

                if (!$(event.target).hasClass('active')) {

                    $(event.target).addClass('active');
                    $(event.target).addClass('disabled-tab');
                }
            });
        </script>

    </div>

</div>
<style>
    #content-panel-id {
        padding: 0;
    }

    .bootstrap-switch .bootstrap-switch-handle-on, .bootstrap-switch .bootstrap-switch-handle-off, .bootstrap-switch .bootstrap-switch-label {
        padding: 0 !important;
        width: 20%;
    }
</style>

<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
<script>jQuery(function ($) {

    $('#w2')
        .on('log.ic', function (evt, msg, level, elt) {
            console.log("ZIntercoolerWidget | log")
        })
        .on('beforeAjaxSend.ic', function (evt, ajaxSetting, elt) {
            console.log("ZIntercoolerWidget | beforeAjaxSend")
        })
        .on('beforeHeaders.ic', function (evt, elt, xhr) {
            console.log("ZIntercoolerWidget | beforeHeaders")
        })
        .on('afterHeaders.ic', function (evt, elt, xhr) {
            console.log("ZIntercoolerWidget | afterHeaders")
        })
        .on('beforeSend.ic', function (evt, elt, data, settings, xhr, requestId) {
            console.log("ZIntercoolerWidget | beforeSend")
        })
        .on('success.ic', function (evt, elt, data, textStatus, xhr, requestId) {
            console.log("ZIntercoolerWidget | success")
        })
        .on('after.success.ic', function (evt, elt, data, textStatus, xhr, requestId) {
            console.log("ZIntercoolerWidget | afterSuccess")
        })
        .on('error.ic', function (evt, elt, status, str, xhr) {
            console.log("ZIntercoolerWidget | error")
        })
        .on('complete.ic', function (evt, elt, data, status, xhr, requestId) {
            console.log("ZIntercoolerWidget | complete")
        })
        .on('onPoll.ic', function (evt, elt) {
            console.log("ZIntercoolerWidget | onPoll")
        })
        .on('handle.onpopstate.ic', function (evt) {
            console.log("ZIntercoolerWidget | handleOnpopstate")
        })
        .on('elementAdded.ic', function (evt) {
            console.log("ZIntercoolerWidget | elementAdded")
        })
        .on('pushUrl.ic', function (evt, target, data) {
            console.log("ZIntercoolerWidget | pushUrl")
        })
        .on('beforeHistorySnapshot.ic', function (evt, target) {
            console.log("ZIntercoolerWidget | beforeHistorySnapshot")
        })
    $('#w7')
        .on('click', function () {
            console.log("ZButtonWidget | $eventClick")
        })
        .on('dblclick', function () {
            console.log("ZButtonWidget | $eventDblclick")
        })
        .on('keyup', function () {
            console.log("ZButtonWidget | $eventKeyup")
        })
        .on('mouseenter', function () {
            console.log("ZButtonWidget | $eventMouseEnter")
        })
        .on('mouseleave', function () {
            console.log("ZButtonWidget | $eventMouseLeave")
        });


    $(document).on('pjax:end', function () {
        $('#w7')
            .on('click', function () {
                console.log("ZButtonWidget | $eventClick")
            })
            .on('dblclick', function () {
                console.log("ZButtonWidget | $eventDblclick")
            })
            .on('keyup', function () {
                console.log("ZButtonWidget | $eventKeyup")
            })
            .on('mouseenter', function () {
                console.log("ZButtonWidget | $eventMouseEnter")
            })
            .on('mouseleave', function () {
                console.log("ZButtonWidget | $eventMouseLeave")
            });


    });

    $('#w8')
        .on('click', function () {
            console.log("ZButtonWidget | $eventClick")
        })
        .on('dblclick', function () {
            console.log("ZButtonWidget | $eventDblclick")
        })
        .on('keyup', function () {
            console.log("ZButtonWidget | $eventKeyup")
        })
        .on('mouseenter', function () {
            console.log("ZButtonWidget | $eventMouseEnter")
        })
        .on('mouseleave', function () {
            console.log("ZButtonWidget | $eventMouseLeave")
        });


    $(document).on('pjax:end', function () {
        $('#w8')
            .on('click', function () {
                console.log("ZButtonWidget | $eventClick")
            })
            .on('dblclick', function () {
                console.log("ZButtonWidget | $eventDblclick")
            })
            .on('keyup', function () {
                console.log("ZButtonWidget | $eventKeyup")
            })
            .on('mouseenter', function () {
                console.log("ZButtonWidget | $eventMouseEnter")
            })
            .on('mouseleave', function () {
                console.log("ZButtonWidget | $eventMouseLeave")
            });


    });

    $('#w9')
        .on('click', function () {
            console.log("ZButtonWidget | $eventClick")
        })
        .on('dblclick', function () {
            console.log("ZButtonWidget | $eventDblclick")
        })
        .on('keyup', function () {
            console.log("ZButtonWidget | $eventKeyup")
        })
        .on('mouseenter', function () {
            console.log("ZButtonWidget | $eventMouseEnter")
        })
        .on('mouseleave', function () {
            console.log("ZButtonWidget | $eventMouseLeave")
        });


    $(document).on('pjax:end', function () {
        $('#w9')
            .on('click', function () {
                console.log("ZButtonWidget | $eventClick")
            })
            .on('dblclick', function () {
                console.log("ZButtonWidget | $eventDblclick")
            })
            .on('keyup', function () {
                console.log("ZButtonWidget | $eventKeyup")
            })
            .on('mouseenter', function () {
                console.log("ZButtonWidget | $eventMouseEnter")
            })
            .on('mouseleave', function () {
                console.log("ZButtonWidget | $eventMouseLeave")
            });


    });

    $('#w10')
        .on('click', function () {
            console.log("ZButtonWidget | $eventClick")
        })
        .on('dblclick', function () {
            console.log("ZButtonWidget | $eventDblclick")
        })
        .on('keyup', function () {
            console.log("ZButtonWidget | $eventKeyup")
        })
        .on('mouseenter', function () {
            console.log("ZButtonWidget | $eventMouseEnter")
        })
        .on('mouseleave', function () {
            console.log("ZButtonWidget | $eventMouseLeave")
        });


    $(document).on('pjax:end', function () {
        $('#w10')
            .on('click', function () {
                console.log("ZButtonWidget | $eventClick")
            })
            .on('dblclick', function () {
                console.log("ZButtonWidget | $eventDblclick")
            })
            .on('keyup', function () {
                console.log("ZButtonWidget | $eventKeyup")
            })
            .on('mouseenter', function () {
                console.log("ZButtonWidget | $eventMouseEnter")
            })
            .on('mouseleave', function () {
                console.log("ZButtonWidget | $eventMouseLeave")
            });


    });

    $('#w11')
        .on('click', function () {
            console.log("ZButtonWidget | $eventClick")
        })
        .on('dblclick', function () {
            console.log("ZButtonWidget | $eventDblclick")
        })
        .on('keyup', function () {
            console.log("ZButtonWidget | $eventKeyup")
        })
        .on('mouseenter', function () {
            console.log("ZButtonWidget | $eventMouseEnter")
        })
        .on('mouseleave', function () {
            console.log("ZButtonWidget | $eventMouseLeave")
        });


    $(document).on('pjax:end', function () {
        $('#w11')
            .on('click', function () {
                console.log("ZButtonWidget | $eventClick")
            })
            .on('dblclick', function () {
                console.log("ZButtonWidget | $eventDblclick")
            })
            .on('keyup', function () {
                console.log("ZButtonWidget | $eventKeyup")
            })
            .on('mouseenter', function () {
                console.log("ZButtonWidget | $eventMouseEnter")
            })
            .on('mouseleave', function () {
                console.log("ZButtonWidget | $eventMouseLeave")
            });


    });

});</script>
</body>
</html>


<div id="yii-debug-toolbar" data-url="/debug/default/toolbar?tag=5ef08486b6d88" style="display:none"
     class="yii-debug-toolbar-bottom"></div>
<style>#yii-debug-toolbar-logo {
    position: fixed;
    right: 31px;
    bottom: 4px
}

@media print {
    .yii-debug-toolbar {
        display: none !important
    }
}

.yii-debug-toolbar {
    font: 11px Verdana, Arial, sans-serif;
    text-align: left;
    width: 96px;
    transition: width .3s ease;
    z-index: 1000000
}

.yii-debug-toolbar.yii-debug-toolbar_active:not(.yii-debug-toolbar_animating) .yii-debug-toolbar__bar {
    overflow: visible;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none
}

.yii-debug-toolbar.yii-debug-toolbar_iframe_active:not(.yii-debug-toolbar_animating) .yii-debug-toolbar__resize-handle {
    display: block;
    height: 4px;
    cursor: ns-resize;
    margin-bottom: 0;
    z-index: 1000001;
    position: absolute;
    left: 0;
    right: 0
}

.yii-debug-toolbar:not(.yii-debug-toolbar_active) .yii-debug-toolbar__bar, .yii-debug-toolbar.yii-debug-toolbar_animating .yii-debug-toolbar__bar {
    height: 40px
}

.yii-debug-toolbar_active {
    width: 100%
}

.yii-debug-toolbar_active .yii-debug-toolbar__toggle-icon {
    -webkit-transform: rotate(0);
    transform: rotate(0)
}

.yii-debug-toolbar_position_top {
    margin: 0 0 20px 0;
    width: 100%
}

.yii-debug-toolbar_position_bottom {
    position: fixed;
    right: 0;
    bottom: 0;
    margin: 0
}

.yii-debug-toolbar__bar {
    position: relative;
    padding: 0;
    font: 11px Verdana, Arial, sans-serif;
    text-align: left;
    overflow: hidden;
    box-sizing: content-box;
    display: flex;
    flex-wrap: wrap;
    background: #fff;
    background: -moz-linear-gradient(top, white 0%, #f7f7f7 100%);
    background: -webkit-linear-gradient(top, white 0%, #f7f7f7 100%);
    background: linear-gradient(to bottom, white 0%, #f7f7f7 100%);
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#ffffff", endColorstr="#f7f7f7", GradientType=0);
    border: 1px solid rgba(0, 0, 0, .11);
    direction: ltr
}

.yii-debug-toolbar__bar::after {
    content: "";
    display: table;
    clear: both
}

.yii-debug-toolbar__view {
    height: 0;
    overflow: hidden;
    background: #fff
}

.yii-debug-toolbar__view iframe {
    margin: 0;
    padding: 10px 0 0;
    height: 100%;
    width: 100%;
    border: 0
}

.yii-debug-toolbar_iframe_active .yii-debug-toolbar__view {
    height: 100%
}

.yii-debug-toolbar_iframe_active .yii-debug-toolbar__toggle-icon {
    -webkit-transform: rotate(90deg);
    transform: rotate(90deg)
}

.yii-debug-toolbar_iframe_active .yii-debug-toolbar__external {
    display: block
}

.yii-debug-toolbar_iframe_animating .yii-debug-toolbar__view {
    transition: height .3s ease
}

.yii-debug-toolbar__block {
    margin: 0;
    border-right: 1px solid rgba(0, 0, 0, .11);
    border-bottom: 1px solid rgba(0, 0, 0, .11);
    padding: 4px 8px;
    line-height: 32px;
    white-space: nowrap
}

@media (max-width: 767.98px) {
    .yii-debug-toolbar__block {
        flex-grow: 1;
        text-align: center
    }
}

.yii-debug-toolbar__block a {
    display: inline-block;
    text-decoration: none;
    color: #000
}

.yii-debug-toolbar__block img {
    vertical-align: middle
}

.yii-debug-toolbar__block_active, .yii-debug-toolbar__ajax:hover {
    background: #f7f7f7;
    background: -moz-linear-gradient(top, #f7f7f7 0%, #e0e0e0 100%);
    background: -webkit-linear-gradient(top, #f7f7f7 0%, #e0e0e0 100%);
    background: linear-gradient(to bottom, #f7f7f7 0%, #e0e0e0 100%);
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#f7f7f7", endColorstr="#e0e0e0", GradientType=0)
}

.yii-debug-toolbar__label {
    display: inline-block;
    padding: 2px 4px;
    font-size: 12px;
    font-weight: normal;
    line-height: 14px;
    white-space: nowrap;
    vertical-align: middle;
    max-width: 100px;
    overflow-x: hidden;
    text-overflow: ellipsis;
    color: #fff;
    text-shadow: 0 -1px 0 rgba(0, 0, 0, .25);
    background-color: #737373;
    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    border-radius: 3px
}

.yii-debug-toolbar__label:empty {
    display: none
}

a.yii-debug-toolbar__label:hover, a.yii-debug-toolbar__label:focus {
    color: #fff;
    text-decoration: none;
    cursor: pointer
}

.yii-debug-toolbar__label_important, .yii-debug-toolbar__label_error {
    background-color: #b94a48
}

.yii-debug-toolbar__label_important[href] {
    background-color: #953b39
}

.yii-debug-toolbar__label_warning, .yii-debug-toolbar__badge_warning {
    background-color: #f89406
}

.yii-debug-toolbar__label_warning[href] {
    background-color: #c67605
}

.yii-debug-toolbar__label_success {
    background-color: #217822
}

.yii-debug-toolbar__label_success[href] {
    background-color: #356635
}

.yii-debug-toolbar__label_info {
    background-color: #0b72b8
}

.yii-debug-toolbar__label_info[href] {
    background-color: #2d6987
}

.yii-debug-toolbar__label_inverse, .yii-debug-toolbar__badge_inverse {
    background-color: #333
}

.yii-debug-toolbar__label_inverse[href], .yii-debug-toolbar__badge_inverse[href] {
    background-color: #1a1a1a
}

.yii-debug-toolbar__title {
    background: #f7f7f7;
    background: -moz-linear-gradient(top, #f7f7f7 0%, #e0e0e0 100%);
    background: -webkit-linear-gradient(top, #f7f7f7 0%, #e0e0e0 100%);
    background: linear-gradient(to bottom, #f7f7f7 0%, #e0e0e0 100%);
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#f7f7f7", endColorstr="#e0e0e0", GradientType=0)
}

.yii-debug-toolbar__block_last {
    width: 80px;
    height: 40px;
    float: left
}

.yii-debug-toolbar__toggle, .yii-debug-toolbar__external {
    cursor: pointer;
    position: absolute;
    width: 30px;
    height: 30px;
    font-size: 25px;
    font-weight: 100;
    line-height: 28px;
    color: #fff;
    text-align: center;
    opacity: .5;
    filter: alpha(opacity=50);
    transition: opacity .3s ease
}

.yii-debug-toolbar__toggle:hover, .yii-debug-toolbar__toggle:focus, .yii-debug-toolbar__external:hover, .yii-debug-toolbar__external:focus {
    color: #fff;
    text-decoration: none;
    opacity: .9;
    filter: alpha(opacity=90)
}

.yii-debug-toolbar__toggle-icon, .yii-debug-toolbar__external-icon {
    display: inline-block;
    background-position: 50% 50%;
    background-repeat: no-repeat
}

.yii-debug-toolbar__toggle {
    right: 10px;
    bottom: 4px
}

.yii-debug-toolbar__toggle-icon {
    padding: 7px 0;
    width: 10px;
    height: 16px;
    background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNSIgaGVpZ2h0PSIxNSIgdmlld0JveD0iMCAwIDUwIDUwIj48cGF0aCBmaWxsPSIjNDQ0IiBkPSJNMTUuNTYzIDQwLjgzNmEuOTk3Ljk5NyAwIDAgMCAxLjQxNCAwbDE1LTE1YTEgMSAwIDAgMCAwLTEuNDE0bC0xNS0xNWExIDEgMCAwIDAtMS40MTQgMS40MTRMMjkuODU2IDI1LjEzIDE1LjU2MyAzOS40MmExIDEgMCAwIDAgMCAxLjQxNHoiLz48L3N2Zz4=");
    transition: -webkit-transform .3s ease-out;
    transition: transform .3s ease-out;
    -webkit-transform: rotate(180deg);
    transform: rotate(180deg)
}

.yii-debug-toolbar__external {
    display: none;
    right: 50px;
    bottom: 4px
}

.yii-debug-toolbar__external-icon {
    padding: 8px 0;
    width: 14px;
    height: 14px;
    background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNSIgaGVpZ2h0PSIxNSIgdmlld0JveD0iMCAwIDUwIDUwIj48cGF0aCBmaWxsPSIjNDQ0IiBkPSJNMzkuNjQyIDkuNzIyYTEuMDEgMS4wMSAwIDAgMC0uMzgyLS4wNzdIMjguMTAzYTEgMSAwIDAgMCAwIDJoOC43NDNMMjEuNyAyNi43OWExIDEgMCAwIDAgMS40MTQgMS40MTVMMzguMjYgMTMuMDZ2OC43NDNhMSAxIDAgMCAwIDIgMFYxMC42NDZhMS4wMDUgMS4wMDUgMCAwIDAtLjYxOC0uOTI0eiIvPjxwYXRoIGQ9Ik0zOS4yNiAyNy45ODVhMSAxIDAgMCAwLTEgMXYxMC42NmgtMjh2LTI4aDEwLjY4M2ExIDEgMCAwIDAgMC0ySDkuMjZhMSAxIDAgMCAwLTEgMXYzMGExIDEgMCAwIDAgMSAxaDMwYTEgMSAwIDAgMCAxLTF2LTExLjY2YTEgMSAwIDAgMC0xLTF6Ii8+PC9zdmc+")
}

.yii-debug-toolbar__switch-icon {
    margin-left: 10px;
    padding: 5px 10px;
    width: 18px;
    height: 18px;
    background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDUwIDUwIiB2ZXJzaW9uPSIxLjEiPjxwYXRoIGQ9Im00MS4xIDIzYy0wLjYgMC0xIDAuNC0xIDF2MTAuN2wtMjUuNi0wLjFjMCAwIDAtMiAwLTIuOCAwLTAuOC0wLjctMS0xLTAuNmwtMy41IDMuNWMtMC42IDAuNi0wLjYgMS4zIDAgMmwzLjQgMy40YzAuNCAwLjQgMS4xIDAuMiAxLTAuNmwwLTIuOWMwIDAgMjAuOCAwLjEgMjYuNiAwIDAuNiAwIDEtMC40IDEtMXYtMTEuN2MwLTAuNi0wLjQtMS0xLTF6TTkgMjYuOSA5IDI2LjkgOSAyNi45IDkgMjYuOSIvPjxwYXRoIGQ9Im05IDI2LjljMC42IDAgMS0wLjQgMS0xdi0xMC43bDI1LjYgMC4xYzAgMCAwIDIgMCAyLjggMCAwLjggMC43IDEgMSAwLjZsMy41LTMuNWMwLjYtMC42IDAuNi0xLjMgMC0ybC0zLjQtMy40Yy0wLjQtMC40LTEuMS0wLjItMSAwLjZsMCAyLjljMCAwLTIwLjgtMC4xLTI2LjYgMC0wLjYgMC0xIDAuNC0xIDF2MTEuN2MwIDAuNiAwLjQgMSAxIDF6Ii8+PC9zdmc+")
}

.yii-debug-toolbar__ajax {
    position: relative
}

.yii-debug-toolbar__ajax:hover .yii-debug-toolbar__ajax_info, .yii-debug-toolbar__ajax:focus .yii-debug-toolbar__ajax_info {
    visibility: visible
}

.yii-debug-toolbar__ajax a {
    color: #337ab7
}

.yii-debug-toolbar__ajax table {
    width: 100%;
    table-layout: auto;
    border-spacing: 0;
    border-collapse: collapse
}

.yii-debug-toolbar__ajax table td {
    padding: 4px;
    font-size: 12px;
    line-height: normal;
    vertical-align: top;
    border-top: 1px solid #ddd
}

.yii-debug-toolbar__ajax table th {
    padding: 4px;
    font-size: 11px;
    line-height: normal;
    vertical-align: bottom;
    border-bottom: 2px solid #ddd
}

.yii-debug-toolbar__ajax_info {
    visibility: hidden;
    transition: visibility .2s linear;
    background-color: #fff;
    box-shadow: inset 0 -10px 10px -10px #e1e1e1;
    position: absolute;
    bottom: 40px;
    left: -1px;
    padding: 10px;
    max-width: 480px;
    max-height: 480px;
    word-wrap: break-word;
    overflow: hidden;
    overflow-y: auto;
    box-sizing: border-box;
    border: 1px solid rgba(0, 0, 0, .11);
    z-index: 1000001
}

.yii-debug-toolbar__ajax_request_status {
    color: #fff;
    padding: 2px 5px
}

.yii-debug-toolbar__ajax_request_url {
    max-width: 170px;
    overflow: hidden;
    text-overflow: ellipsis
}
</style>
<script>(function () {
    'use strict';

    var findToolbar = function () {
            return document.querySelector('#yii-debug-toolbar');
        },
        ajax = function (url, settings) {
            var xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP');
            settings = settings || {};
            xhr.open(settings.method || 'GET', url, true);
            xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
            xhr.setRequestHeader('Accept', 'text/html');
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4) {
                    if (xhr.status === 200 && settings.success) {
                        settings.success(xhr);
                    } else if (xhr.status !== 200 && settings.error) {
                        settings.error(xhr);
                    }
                }
            };
            xhr.send(settings.data || '');
        },
        url,
        div,
        toolbarEl = findToolbar(),
        toolbarAnimatingClass = 'yii-debug-toolbar_animating',
        barSelector = '.yii-debug-toolbar__bar',
        viewSelector = '.yii-debug-toolbar__view',
        blockSelector = '.yii-debug-toolbar__block',
        toggleSelector = '.yii-debug-toolbar__toggle',
        externalSelector = '.yii-debug-toolbar__external',

        CACHE_KEY = 'yii-debug-toolbar',
        ACTIVE_STATE = 'active',

        animationTime = 300,

        activeClass = 'yii-debug-toolbar_active',
        iframeActiveClass = 'yii-debug-toolbar_iframe_active',
        iframeAnimatingClass = 'yii-debug-toolbar_iframe_animating',
        titleClass = 'yii-debug-toolbar__title',
        blockClass = 'yii-debug-toolbar__block',
        ignoreClickClass = 'yii-debug-toolbar__ignore_click',
        blockActiveClass = 'yii-debug-toolbar__block_active',
        requestStack = [];

    if (toolbarEl) {
        url = toolbarEl.getAttribute('data-url');

        ajax(url, {
            success: function (xhr) {
                div = document.createElement('div');
                div.innerHTML = xhr.responseText;

                toolbarEl.parentNode && toolbarEl.parentNode.replaceChild(div, toolbarEl);

                showToolbar(findToolbar());

                var event;
                if (typeof (Event) === 'function') {
                    event = new Event('yii.debug.toolbar_attached', {'bubbles': true});
                } else {
                    event = document.createEvent('Event');
                    event.initEvent('yii.debug.toolbar_attached', true, true);
                }

                div.dispatchEvent(event);
            },
            error: function (xhr) {
                toolbarEl.innerText = xhr.responseText;
            }
        });
    }

    function showToolbar(toolbarEl) {
        var barEl = toolbarEl.querySelector(barSelector),
            viewEl = toolbarEl.querySelector(viewSelector),
            toggleEl = toolbarEl.querySelector(toggleSelector),
            externalEl = toolbarEl.querySelector(externalSelector),
            blockEls = barEl.querySelectorAll(blockSelector),
            blockLinksEls = document.querySelectorAll(blockSelector + ':not(.' + titleClass + ') a'),
            iframeEl = viewEl.querySelector('iframe'),
            iframeHeight = function () {
                return (window.innerHeight * (toolbarEl.dataset.height / 100) - barEl.clientHeight) + 'px';
            },
            isIframeActive = function () {
                return toolbarEl.classList.contains(iframeActiveClass);
            },
            resizeIframe = function (mouse) {
                var availableHeight = window.innerHeight - barEl.clientHeight;
                viewEl.style.height = Math.min(availableHeight, availableHeight - mouse.y) + "px";
            },
            showIframe = function (href) {
                toolbarEl.classList.add(iframeAnimatingClass);
                toolbarEl.classList.add(iframeActiveClass);

                iframeEl.src = externalEl.href = href;
                iframeEl.removeAttribute('tabindex');

                viewEl.style.height = iframeHeight();
                setTimeout(function () {
                    toolbarEl.classList.remove(iframeAnimatingClass);
                }, animationTime);
            },
            hideIframe = function () {
                toolbarEl.classList.add(iframeAnimatingClass);
                toolbarEl.classList.remove(iframeActiveClass);
                iframeEl.setAttribute("tabindex", "-1");
                removeActiveBlocksCls();

                externalEl.href = '#';
                viewEl.style.height = '';
                setTimeout(function () {
                    toolbarEl.classList.remove(iframeAnimatingClass);
                }, animationTime);
            },
            removeActiveBlocksCls = function () {
                [].forEach.call(blockEls, function (el) {
                    el.classList.remove(blockActiveClass);
                });
            },
            toggleToolbarClass = function (className) {
                toolbarEl.classList.add(toolbarAnimatingClass);
                if (toolbarEl.classList.contains(className)) {
                    toolbarEl.classList.remove(className);
                    [].forEach.call(blockLinksEls, function (el) {
                        el.setAttribute('tabindex', "-1");
                    });
                } else {
                    [].forEach.call(blockLinksEls, function (el) {
                        el.removeAttribute('tabindex');
                    });
                    toolbarEl.classList.add(className);
                }
                setTimeout(function () {
                    toolbarEl.classList.remove(toolbarAnimatingClass);
                }, animationTime);
            },
            toggleStorageState = function (key, value) {
                if (window.localStorage) {
                    var item = localStorage.getItem(key);

                    if (item) {
                        localStorage.removeItem(key);
                    } else {
                        localStorage.setItem(key, value);
                    }
                }
            },
            restoreStorageState = function (key) {
                if (window.localStorage) {
                    return localStorage.getItem(key);
                }
            },
            togglePosition = function () {
                if (isIframeActive()) {
                    hideIframe();
                } else {
                    toggleToolbarClass(activeClass);
                    toggleStorageState(CACHE_KEY, ACTIVE_STATE);
                }
            };

        if (restoreStorageState(CACHE_KEY) === ACTIVE_STATE) {
            var transition = toolbarEl.style.transition;
            toolbarEl.style.transition = 'none';
            toolbarEl.classList.add(activeClass);
            setTimeout(function () {
                toolbarEl.style.transition = transition;
            }, animationTime);
        } else {
            [].forEach.call(blockLinksEls, function (el) {
                el.setAttribute('tabindex', "-1");
            });
        }

        toolbarEl.style.display = 'block';

        window.onresize = function () {
            if (toolbarEl.classList.contains(iframeActiveClass)) {
                viewEl.style.height = iframeHeight();
            }
        };

        toolbarEl.addEventListener("mousedown", function (e) {
            if (isIframeActive() && (e.y - toolbarEl.offsetTop < 4 /* 4px click zone */)) {
                document.addEventListener("mousemove", resizeIframe, false);
            }
        }, false);

        document.addEventListener("mouseup", function () {
            if (isIframeActive()) {
                document.removeEventListener("mousemove", resizeIframe, false);
            }
        }, false);

        barEl.onclick = function (e) {
            var target = e.target,
                block = findAncestor(target, blockClass);

            if (block
                && !block.classList.contains(titleClass)
                && !block.classList.contains(ignoreClickClass)
                && e.which !== 2 && !e.ctrlKey // not mouse wheel and not ctrl+click
            ) {
                while (target !== this) {
                    if (target.href) {
                        removeActiveBlocksCls();
                        block.classList.add(blockActiveClass);
                        showIframe(target.href);
                    }
                    target = target.parentNode;
                }

                e.preventDefault();
            }
        };

        toggleEl.onclick = togglePosition;
    }

    function findAncestor(el, cls) {
        while ((el = el.parentElement) && !el.classList.contains(cls)) ;
        return el;
    }

    function renderAjaxRequests() {
        var requestCounter = document.getElementsByClassName('yii-debug-toolbar__ajax_counter');
        if (!requestCounter.length) {
            return;
        }
        var ajaxToolbarPanel = document.querySelector('.yii-debug-toolbar__ajax');
        var tbodies = document.getElementsByClassName('yii-debug-toolbar__ajax_requests');
        var state = 'ok';
        if (tbodies.length) {
            var tbody = tbodies[0];
            var rows = document.createDocumentFragment();
            if (requestStack.length) {
                var firstItem = requestStack.length > 20 ? requestStack.length - 20 : 0;
                for (var i = firstItem; i < requestStack.length; i++) {
                    var request = requestStack[i];
                    var row = document.createElement('tr');
                    rows.appendChild(row);

                    var methodCell = document.createElement('td');
                    methodCell.innerHTML = request.method;
                    row.appendChild(methodCell);

                    var statusCodeCell = document.createElement('td');
                    var statusCode = document.createElement('span');
                    if (request.statusCode < 300) {
                        statusCode.setAttribute('class', 'yii-debug-toolbar__ajax_request_status yii-debug-toolbar__label_success');
                    } else if (request.statusCode < 400) {
                        statusCode.setAttribute('class', 'yii-debug-toolbar__ajax_request_status yii-debug-toolbar__label_warning');
                    } else {
                        statusCode.setAttribute('class', 'yii-debug-toolbar__ajax_request_status yii-debug-toolbar__label_error');
                    }
                    statusCode.textContent = request.statusCode || '-';
                    statusCodeCell.appendChild(statusCode);
                    row.appendChild(statusCodeCell);

                    var pathCell = document.createElement('td');
                    pathCell.className = 'yii-debug-toolbar__ajax_request_url';
                    pathCell.innerHTML = request.url;
                    pathCell.setAttribute('title', request.url);
                    row.appendChild(pathCell);

                    var durationCell = document.createElement('td');
                    durationCell.className = 'yii-debug-toolbar__ajax_request_duration';
                    if (request.duration) {
                        durationCell.innerText = request.duration + " ms";
                    } else {
                        durationCell.innerText = '-';
                    }
                    row.appendChild(durationCell);
                    row.appendChild(document.createTextNode(' '));

                    var profilerCell = document.createElement('td');
                    if (request.profilerUrl) {
                        var profilerLink = document.createElement('a');
                        profilerLink.setAttribute('href', request.profilerUrl);
                        profilerLink.innerText = request.profile;
                        profilerCell.appendChild(profilerLink);
                    } else {
                        profilerCell.innerText = 'n/a';
                    }
                    row.appendChild(profilerCell);

                    if (request.error) {
                        if (state !== "loading" && i > requestStack.length - 4) {
                            state = 'error';
                        }
                    } else if (request.loading) {
                        state = 'loading'
                    }
                    row.className = 'yii-debug-toolbar__ajax_request';
                }
                while (tbody.firstChild) {
                    tbody.removeChild(tbody.firstChild);
                }
                tbody.appendChild(rows);
            }
            ajaxToolbarPanel.style.display = 'block';
        }
        requestCounter[0].innerText = requestStack.length;
        var className = 'yii-debug-toolbar__label yii-debug-toolbar__ajax_counter';
        if (state === 'ok') {
            className += ' yii-debug-toolbar__label_success';
        } else if (state === 'error') {
            className += ' yii-debug-toolbar__label_error';
        }
        requestCounter[0].className = className;
    }

    /**
     * Should AJAX request to be logged in debug panel
     *
     * @param requestUrl
     * @returns {boolean}
     */
    function shouldTrackRequest(requestUrl) {
        var a = document.createElement('a');
        a.href = requestUrl;

        return a.host === location.host;
    }

    var proxied = XMLHttpRequest.prototype.open;

    XMLHttpRequest.prototype.open = function (method, url, async, user, pass) {
        var self = this;

        if (shouldTrackRequest(url)) {
            var stackElement = {
                loading: true,
                error: false,
                url: url,
                method: method,
                start: new Date()
            };
            requestStack.push(stackElement);
            this.addEventListener('readystatechange', function () {
                if (self.readyState === 4) {
                    stackElement.duration = self.getResponseHeader('X-Debug-Duration') || new Date() - stackElement.start;
                    stackElement.loading = false;
                    stackElement.statusCode = self.status;
                    stackElement.error = self.status < 200 || self.status >= 400;
                    stackElement.profile = self.getResponseHeader('X-Debug-Tag');
                    stackElement.profilerUrl = self.getResponseHeader('X-Debug-Link');
                    renderAjaxRequests();
                }
            }, false);
            renderAjaxRequests();
        }
        proxied.apply(this, Array.prototype.slice.call(arguments));
    };

    // catch fetch AJAX requests
    if (window.fetch) {
        var originalFetch = window.fetch;

        window.fetch = function (input, init) {
            var method;
            var url;
            if (typeof input === 'string') {
                method = (init && init.method) || 'GET';
                url = input;
            } else if (window.URL && input instanceof URL) { // fix https://github.com/yiisoft/yii2-debug/issues/296
                method = (init && init.method) || 'GET';
                url = input.href;
            } else if (window.Request && input instanceof Request) {
                method = input.method;
                url = input.url;
            }
            var promise = originalFetch(input, init);

            if (shouldTrackRequest(url)) {
                var stackElement = {
                    loading: true,
                    error: false,
                    url: url,
                    method: method,
                    start: new Date()
                };
                requestStack.push(stackElement);
                promise.then(function (response) {
                    stackElement.duration = response.headers.get('X-Debug-Duration') || new Date() - stackElement.start;
                    stackElement.loading = false;
                    stackElement.statusCode = response.status;
                    stackElement.error = response.status < 200 || response.status >= 400;
                    stackElement.profile = response.headers.get('X-Debug-Tag');
                    stackElement.profilerUrl = response.headers.get('X-Debug-Link');
                    renderAjaxRequests();

                    return response;
                }).catch(function (error) {
                    stackElement.loading = false;
                    stackElement.error = true;
                    renderAjaxRequests();

                    throw error;
                });
                renderAjaxRequests();
            }

            return promise;
        };
    }

})();
</script>
