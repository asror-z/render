<!DOCTYPE html>
<html>
<head>
    <title>tryit-jssip</title>

    <link rel="stylesheet" href="./demo_2_files/tryit-jssip.css">


    <script src="./demo_2_files/callstats.min.js.download"></script>
    <script src="./demo_2_files/callstats-jssip.min.js.download"></script>
    <script src="https://cdn.jsdelivr.net/npm/jssip@3.4.0/lib-es5/JsSIP.min.js"></script>

    <script>
        /*	 Uncomment and fill the SETTINGS object in order to use hardcoded settings

             You don't need to set display_name nor uri, they can be set via HTTP form in
             the Login section of the web*/

        window.SETTINGS =
            {
                display_name: null,
                uri: null,
                password: null,
                socket:
                    {
                        uri: 'wss:sip.yourdomain.com',
                        via_transport: 'auto',
                    },
                registrar_server: null,
                contact_uri: null,
                authorization_user: null,
                instance_id: null,
                session_timers: true,
                use_preloaded_route: false,
                pcConfig:
                    {
                        rtcpMuxPolicy: 'negotiate',
                        iceServers:
                            [
                                {urls: ['stun:stun.l.google.com:19302']}
                            ]
                    },
                callstats:
                    {
                        enabled: false,
                        AppID: null,
                        AppSecret: null
                    }
            };
    </script>

    <script src="./demo_2_files/tryit-jssip.js.download"></script>
</head>

<body>
<div id="tryit-jssip-container">
    <div data-component="App">
        <div class="notifications-wrapper"></div>
        <div data-component="Login" class="">
            <div class="logo-container">
                <div data-component="Logo" class="big"><h1><span class="colorized">TRYIT</span>J<span
                        class="small">S</span>SIP</h1></div>
            </div>
            <form action="https://tryit.jssip.net/">
                <div class="settings-icon-container">
                    <svg class="icon" viewBox="0 0 24 24"
                         style="display: inline-block; color: rgba(0, 0, 0, 0.87); fill: rgb(102, 102, 102); height: 24px; width: 24px; user-select: none; transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;"></svg>
                </div>
                <div class="form-container">
                    <div style="font-size: 16px; line-height: 24px; width: 100%; height: 72px; display: inline-block; position: relative; background-color: transparent; font-family: Roboto, sans-serif; transition: height 200ms cubic-bezier(0.23, 1, 0.32, 1) 0ms; cursor: auto;">
                        <label for="undefined-undefined-YourName-55324"
                               style="position: absolute; line-height: 22px; top: 38px; transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms; z-index: 1; transform: scale(0.75) translate(0px, -28px); transform-origin: left top; pointer-events: none; user-select: none; color: rgb(0, 188, 212);">Your
                            Name</label><input type="text" id="undefined-undefined-YourName-55324" value=""
                                               style="padding: 0px; position: relative; width: 100%; border: none; outline: none; background-color: rgba(0, 0, 0, 0); color: rgba(0, 0, 0, 0.87); cursor: inherit; font: inherit; opacity: 1; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); height: 100%; box-sizing: border-box; margin-top: 14px;">
                        <div>
                            <hr aria-hidden="true"
                                style="border-top: none rgb(158, 158, 158); border-left: none rgb(158, 158, 158); border-right: none rgb(158, 158, 158); border-bottom: 1px solid rgb(158, 158, 158); bottom: 8px; box-sizing: content-box; margin: 0px; position: absolute; width: 100%;">
                            <hr aria-hidden="true"
                                style="border-top: none rgb(0, 188, 212); border-left: none rgb(0, 188, 212); border-right: none rgb(0, 188, 212); border-bottom: 2px solid rgb(0, 188, 212); bottom: 8px; box-sizing: content-box; margin: 0px; position: absolute; width: 100%; transform: scaleX(1); transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;">
                        </div>
                    </div>
                    <button tabindex="0" type="button"
                            style="border: 10px; box-sizing: border-box; display: table; font-family: Roboto, sans-serif; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); cursor: pointer; text-decoration: none; margin: 20px auto 0px; padding: 0px; outline: none; font-size: inherit; font-weight: inherit; position: relative; height: 36px; line-height: 36px; min-width: 88px; color: rgb(0, 188, 212); transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms; border-radius: 2px; user-select: none; overflow: hidden; background-color: rgba(0, 0, 0, 0); text-align: center;">
                        <div><span
                                style="position: relative; padding-left: 16px; padding-right: 16px; vertical-align: middle; letter-spacing: 0px; text-transform: uppercase; font-weight: 500; font-size: 14px;">Reset</span>
                        </div>
                    </button>
                </div>
            </form>
            <div class="submit-container">
                <div class="submit-button disabled"></div>
            </div>
        </div>
        <div style="position: fixed; left: 50%; display: flex; bottom: 0px; z-index: 2900; visibility: hidden; transform: translate(-50%, 48px); transition: transform 400ms cubic-bezier(0.23, 1, 0.32, 1) 0ms, visibility 400ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;">
            <div width="3"
                 style="font-family: Roboto, sans-serif; background-color: rgba(0, 0, 0, 0.87); padding: 0px 24px; height: 48px; line-height: 48px; border-radius: 2px; max-width: 568px; min-width: 288px; width: auto; flex-grow: 0; text-align: center;">
                <div style="font-size: 14px; color: rgb(255, 255, 255); opacity: 0; transition: opacity 400ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;">
                    <span></span></div>
            </div>
        </div>
    </div>
</div>
<div id="tryit-jssip-media-query-detector"></div>


<style>
    button::-moz-focus-inner,
    input::-moz-focus-inner {
        border: 0;
        padding: 0;
    }
</style>
<script>

    var socket = new JsSIP.WebSocketInterface('wss://sip.myhost.com');
    var configuration = {
        sockets: [socket],
        uri: 'sip:alice@example.com',
        password: 'superpassword'
    };

    var ua = new JsSIP.UA(configuration);

    ua.start();

    // Register callbacks to desired call events
    var eventHandlers = {
        'progress': function (e) {
            console.log('call is in progress');
        },
        'failed': function (e) {
            console.log('call failed with cause: ' + e.data.cause);
        },
        'ended': function (e) {
            console.log('call ended with cause: ' + e.data.cause);
        },
        'confirmed': function (e) {
            console.log('call confirmed');
        }
    };

    var options = {
        'eventHandlers': eventHandlers,
        'mediaConstraints': {'audio': true, 'video': true}
    };

    var session = ua.call('sip:bob@example.com', options);
</script>
</body>

</html>
